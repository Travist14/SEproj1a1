{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"MARC - Multi-Agent Requirement Collaboration","text":""},{"location":"#overview","title":"Overview","text":"<p>MARC (Multi-Agent Requirement Collaboration) is an AI-powered framework for collaborative Requirements Engineering that leverages multiple LLM-based agents to gather, analyze, and synthesize software requirements from diverse stakeholder perspectives.</p> <p>Built on IEEE 29148 standards, MARC enables teams to create comprehensive, unambiguous, and testable requirements documentation through intelligent multi-agent collaboration.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Multi-Persona Analysis: Gather requirements from 5 distinct stakeholder perspectives</li> <li>IEEE 29148 Compliant: Ensures requirements meet industry standards</li> <li>LLM-Powered: Built on Meta-Llama-3.1-8B-Instruct with vLLM for efficient inference</li> <li>Real-time Streaming: Asynchronous API with streaming support for responsive UX</li> <li>Structured Extraction: Automated parsing and validation of requirement fields</li> <li>Comprehensive Testing: 80%+ test coverage with unit, integration, and compliance tests</li> <li>Full-Stack Solution: FastAPI backend + React frontend for complete workflow</li> </ul>"},{"location":"#stakeholder-personas","title":"Stakeholder Personas","text":"<p>MARC simulates five distinct stakeholder perspectives:</p> Persona Focus Area Key Concerns Developer Technical feasibility Implementation, dependencies, technical debt Product Manager User value &amp; metrics Business value, prioritization, KPIs Customer Usability &amp; simplicity User experience, ease of use, pain points Sales Value proposition Competitive positioning, selling points Shareholder Financial returns ROI, strategic value, growth <p>By synthesizing insights from these diverse perspectives, MARC produces well-rounded requirements that balance technical constraints with business objectives and user needs.</p>"},{"location":"#quick-links","title":"Quick Links","text":"<ul> <li>Installation Guide - Get MARC up and running</li> <li>Quick Start - Your first requirement in 5 minutes</li> <li>Architecture Overview - Understanding MARC's design</li> <li>API Reference - Complete API documentation</li> <li>Testing Guide - Running and writing tests</li> </ul>"},{"location":"#use-cases","title":"Use Cases","text":"<p>MARC is designed for:</p> <p>Software Engineering Teams - Requirements Engineers gathering comprehensive requirements - Product Managers planning new features with complex stakeholder landscapes - Development Teams ensuring technical feasibility before implementation - QA/Test Engineers needing clear, testable acceptance criteria</p> <p>Businesses &amp; Organizations - Startups building MVPs and balancing diverse stakeholder needs - Enterprise Teams managing complex projects with multiple departments - Consulting Firms gathering client requirements across various domains - Agile Teams conducting sprint planning and backlog refinement</p> <p>Education &amp; Research - Software Engineering Students learning requirements engineering best practices - CS Educators teaching collaborative software development - Researchers studying LLM applications in software engineering - Academic Projects exploring multi-agent systems</p>"},{"location":"#technology-stack","title":"Technology Stack","text":"<p>Backend - FastAPI (async Python web framework) - vLLM (efficient LLM inference) - Pydantic (data validation) - Meta-Llama-3.1-8B-Instruct (LLM model)</p> <p>Frontend - React 18.3+ (UI framework) - Vite (build tool) - Custom hooks for chat management</p> <p>Testing - pytest (backend testing) - pytest-asyncio (async test support) - httpx (HTTP client testing) - 80%+ code coverage</p>"},{"location":"#getting-started","title":"Getting Started","text":"<p>Ready to try MARC? Head over to the Installation Guide to get started in under 5 minutes!</p>"},{"location":"#documentation-structure","title":"Documentation Structure","text":"<p>This documentation is organized into several sections:</p> <ul> <li>Getting Started: Installation, configuration, and quick start guides</li> <li>Architecture: Deep dive into system design and components</li> <li>API Reference: Complete API documentation and module references</li> <li>User Guide: How to use MARC effectively for requirements engineering</li> <li>Development: Contributing guidelines, testing, and code standards</li> </ul>"},{"location":"api/backend/","title":"Backend API Documentation","text":"<p>Python module and class documentation for MARC backend.</p>"},{"location":"api/backend/#module-appmain","title":"Module: app.main","text":"<p>Location: <code>src/backend/app/main.py</code></p>"},{"location":"api/backend/#classes","title":"Classes","text":""},{"location":"api/backend/#chatmessage","title":"ChatMessage","text":"<p>Purpose: Single message exchanged in chat conversation</p> <pre><code>class ChatMessage(BaseModel):\n    role: str  # system|user|assistant\n    content: str\n</code></pre> <p>Fields: - <code>role</code> (str): Message author role. Must be one of: <code>system</code>, <code>user</code>, <code>assistant</code> - <code>content</code> (str): Text content of the message</p> <p>Validation: - Role is validated against allowed values - Content must be non-empty string</p> <p>Example: <pre><code>message = ChatMessage(\n    role=\"user\",\n    content=\"Build user authentication\"\n)\n</code></pre></p>"},{"location":"api/backend/#generaterequest","title":"GenerateRequest","text":"<p>Purpose: Request payload for /generate endpoint</p> <pre><code>class GenerateRequest(BaseModel):\n    messages: List[ChatMessage]\n    stream: bool = True\n    max_tokens: int = DEFAULT_MAX_TOKENS\n    temperature: float = DEFAULT_TEMPERATURE\n    top_p: float = DEFAULT_TOP_P\n    presence_penalty: float = 0.0\n    frequency_penalty: float = 0.0\n    stop: Optional[List[str]] = None\n    persona: Optional[str] = None\n</code></pre> <p>Fields: - <code>messages</code>: Ordered list of chat messages (required) - <code>stream</code>: Enable token streaming (default: True) - <code>max_tokens</code>: Maximum tokens to generate (\u22651, default: 512) - <code>temperature</code>: Sampling temperature (0.0-2.0, default: 0.7) - <code>top_p</code>: Nucleus sampling threshold (0.0-1.0, default: 0.95) - <code>presence_penalty</code>: Presence penalty (-2.0 to 2.0, default: 0.0) - <code>frequency_penalty</code>: Frequency penalty (-2.0 to 2.0, default: 0.0) - <code>stop</code>: Optional stop sequences - <code>persona</code>: Optional persona identifier (informational)</p> <p>Example: <pre><code>request = GenerateRequest(\n    messages=[\n        ChatMessage(role=\"system\", content=\"You are a developer.\"),\n        ChatMessage(role=\"user\", content=\"Build authentication\")\n    ],\n    stream=True,\n    max_tokens=512,\n    temperature=0.7\n)\n</code></pre></p>"},{"location":"api/backend/#enginemanager","title":"EngineManager","text":"<p>Purpose: Lazy-initializes and caches AsyncLLMEngine singleton</p> <pre><code>class EngineManager:\n    def __init__(self) -&gt; None\n    @property\n    def is_ready(self) -&gt; bool\n    async def get_engine(self) -&gt; AsyncLLMEngine\n</code></pre> <p>Methods:</p>"},{"location":"api/backend/#__init__","title":"<code>__init__</code>","text":"<p>Initialize the engine manager.</p> <pre><code>manager = EngineManager()\n</code></pre>"},{"location":"api/backend/#is_ready-property","title":"<code>is_ready</code> (property)","text":"<p>Check if engine is initialized.</p> <p>Returns: <code>bool</code> - True if engine is ready</p> <pre><code>if engine_manager.is_ready:\n    print(\"Engine loaded\")\n</code></pre>"},{"location":"api/backend/#get_engine-async","title":"<code>get_engine</code> (async)","text":"<p>Get or initialize the singleton engine instance.</p> <p>Returns: <code>AsyncLLMEngine</code> - The vLLM engine</p> <p>Raises: <code>RuntimeError</code> - If vLLM is not available</p> <pre><code>engine = await engine_manager.get_engine()\n</code></pre> <p>Thread Safety: Uses asyncio.Lock for concurrent access</p> <p>Implementation Details: - First call initializes engine (slow) - Subsequent calls return cached instance (fast) - Reads model configuration from environment variables - Logs model initialization</p>"},{"location":"api/backend/#functions","title":"Functions","text":""},{"location":"api/backend/#format_chat_prompt","title":"format_chat_prompt","text":"<p>Convert structured chat messages into plain-text prompt.</p> <pre><code>def format_chat_prompt(messages: List[ChatMessage]) -&gt; str\n</code></pre> <p>Parameters: - <code>messages</code>: List of ChatMessage objects</p> <p>Returns: <code>str</code> - Formatted prompt string</p> <p>Raises: <code>ValueError</code> - If messages list is empty</p> <p>Example: <pre><code>messages = [\n    ChatMessage(role=\"system\", content=\"You are helpful.\"),\n    ChatMessage(role=\"user\", content=\"Hello\")\n]\n\nprompt = format_chat_prompt(messages)\n# Output:\n# System: You are helpful.\n#\n# User: Hello\n#\n# Assistant:\n</code></pre></p> <p>Format: ``` {Role}: {content}</p> <p>{Role}: {content}</p>"},{"location":"api/frontend/","title":"Frontend Component API","text":"<p>Documentation for React components and hooks.</p>"},{"location":"api/frontend/#components","title":"Components","text":""},{"location":"api/frontend/#app","title":"App","text":"<p>File: <code>src/frontend/src/App.jsx</code></p> <p>Purpose: Root application component</p> <p>State: - <code>personaKey</code>: Currently selected persona (null = login screen)</p> <p>Props: None</p> <p>Example: <pre><code>import App from './App';\n\n&lt;App /&gt;\n</code></pre></p>"},{"location":"api/frontend/#chatwindow","title":"ChatWindow","text":"<p>File: <code>src/frontend/src/components/ChatWindow.jsx</code></p> <p>Purpose: Display chat message history</p> <p>Props: <pre><code>{\n  messages: Array&lt;{\n    role: 'user' | 'assistant',\n    content: string\n  }&gt;\n}\n</code></pre></p> <p>Features: - Auto-scrolls to latest message - Role-based styling - Empty state message</p> <p>Example: <pre><code>&lt;ChatWindow messages={[\n  { role: 'user', content: 'Hello' },\n  { role: 'assistant', content: 'Hi there!' }\n]} /&gt;\n</code></pre></p>"},{"location":"api/frontend/#messageinput","title":"MessageInput","text":"<p>File: <code>src/frontend/src/components/MessageInput.jsx</code></p> <p>Purpose: Text input for user messages</p> <p>Props: <pre><code>{\n  onSend: (message: string) =&gt; void,\n  onCancel: () =&gt; void,\n  disabled: boolean,\n  status: 'idle' | 'pending' | 'error'\n}\n</code></pre></p> <p>Features: - Enter key to send - Disabled during generation - Cancel button when pending - Auto-resize textarea</p> <p>Example: <pre><code>&lt;MessageInput\n  onSend={(msg) =&gt; console.log(msg)}\n  onCancel={() =&gt; console.log('Cancelled')}\n  disabled={false}\n  status=\"idle\"\n/&gt;\n</code></pre></p>"},{"location":"api/frontend/#login","title":"Login","text":"<p>File: <code>src/frontend/src/components/Login.jsx</code></p> <p>Purpose: Persona selection screen</p> <p>Props: <pre><code>{\n  personas: Record&lt;string, PersonaConfig&gt;,\n  onSelect: (personaKey: string) =&gt; void\n}\n</code></pre></p> <p>PersonaConfig: <pre><code>{\n  key: string,\n  label: string,\n  description: string,\n  color: string\n}\n</code></pre></p> <p>Example: <pre><code>&lt;Login\n  personas={PERSONAS}\n  onSelect={(key) =&gt; setPersona(key)}\n/&gt;\n</code></pre></p>"},{"location":"api/frontend/#hooks","title":"Hooks","text":""},{"location":"api/frontend/#usechat","title":"useChat","text":"<p>File: <code>src/frontend/src/hooks/useChat.js</code></p> <p>Purpose: Manage chat state and API interactions</p> <p>Signature: <pre><code>function useChat(personaKey: string): {\n  messages: Array&lt;Message&gt;,\n  sendMessage: (content: string) =&gt; Promise&lt;void&gt;,\n  cancel: () =&gt; void,\n  reset: () =&gt; void,\n  status: 'idle' | 'pending' | 'error'\n}\n</code></pre></p> <p>Parameters: - <code>personaKey</code>: Selected persona identifier</p> <p>Returns: - <code>messages</code>: Array of chat messages - <code>sendMessage</code>: Send user message and get response - <code>cancel</code>: Cancel ongoing generation - <code>reset</code>: Clear chat history - <code>status</code>: Current generation status</p> <p>Example: <pre><code>import { useChat } from './hooks/useChat';\n\nfunction ChatApp() {\n  const { messages, sendMessage, status } = useChat('developer');\n\n  const handleSend = async (text) =&gt; {\n    await sendMessage(text);\n  };\n\n  return (\n    &lt;&gt;\n      &lt;ChatWindow messages={messages} /&gt;\n      &lt;MessageInput\n        onSend={handleSend}\n        disabled={status === 'pending'}\n      /&gt;\n    &lt;/&gt;\n  );\n}\n</code></pre></p> <p>State Management: - Maintains message history - Tracks generation status - Manages abort controller for cancellation</p> <p>Error Handling: - Sets status to 'error' on failure - Logs errors to console - Handles abort gracefully</p>"},{"location":"api/frontend/#api-client","title":"API Client","text":""},{"location":"api/frontend/#streamgenerate","title":"streamGenerate","text":"<p>File: <code>src/frontend/src/api/client.js</code></p> <p>Purpose: Stream generation from backend API</p> <p>Signature: <pre><code>async function streamGenerate(\n  payload: GenerateRequest,\n  onChunk: (delta: string) =&gt; void,\n  signal?: AbortSignal\n): Promise&lt;void&gt;\n</code></pre></p> <p>Parameters: - <code>payload</code>: Request object matching GenerateRequest - <code>onChunk</code>: Callback for each token chunk - <code>signal</code>: Optional AbortSignal for cancellation</p> <p>Throws: - <code>Error</code>: If response is not OK - <code>AbortError</code>: If request is cancelled</p> <p>Example: <pre><code>import { streamGenerate } from './api/client';\n\nconst controller = new AbortController();\n\nawait streamGenerate(\n  {\n    messages: [\n      { role: 'user', content: 'Hello' }\n    ],\n    stream: true\n  },\n  (delta) =&gt; {\n    console.log('Token:', delta);\n  },\n  controller.signal\n);\n\n// To cancel:\ncontroller.abort();\n</code></pre></p> <p>Protocol: - Sends POST to /api/generate - Reads NDJSON stream - Parses each line as JSON - Calls onChunk for token events - Throws on error events</p>"},{"location":"api/frontend/#configuration","title":"Configuration","text":""},{"location":"api/frontend/#personas","title":"PERSONAS","text":"<p>File: <code>src/frontend/src/config/personas.js</code></p> <p>Purpose: Persona definitions</p> <p>Type: <pre><code>Record&lt;string, {\n  key: string,\n  label: string,\n  description: string,\n  systemPrompt: string,\n  color: string\n}&gt;\n</code></pre></p> <p>Available Personas: - <code>developer</code> - <code>product_manager</code> - <code>customer</code> - <code>sales</code> - <code>shareholder</code></p> <p>Example: <pre><code>import { PERSONAS, getPersonaConfig } from './config/personas';\n\nconst dev = getPersonaConfig('developer');\nconsole.log(dev.label); // \"Developer\"\nconsole.log(dev.systemPrompt); // \"You are a software developer...\"\n</code></pre></p>"},{"location":"api/frontend/#getpersonaconfig","title":"getPersonaConfig","text":"<p>File: <code>src/frontend/src/config/personas.js</code></p> <p>Purpose: Get persona configuration by key</p> <p>Signature: <pre><code>function getPersonaConfig(key: string): PersonaConfig\n</code></pre></p> <p>Parameters: - <code>key</code>: Persona identifier</p> <p>Returns: PersonaConfig object (defaults to 'developer' if not found)</p> <p>Example: <pre><code>const persona = getPersonaConfig('product_manager');\n</code></pre></p>"},{"location":"api/frontend/#styling","title":"Styling","text":""},{"location":"api/frontend/#css-classes","title":"CSS Classes","text":"<p>Chat Window: - <code>.chat-window</code> - Container - <code>.message</code> - Individual message - <code>.message.user</code> - User message - <code>.message.assistant</code> - Assistant message</p> <p>Message Input: - <code>.message-input</code> - Container - <code>.message-input textarea</code> - Text input - <code>.message-input button</code> - Send/cancel buttons</p> <p>Login: - <code>.login-screen</code> - Container - <code>.persona-card</code> - Persona selection card - <code>.persona-card-{key}</code> - Persona-specific styling</p> <p>App Shell: - <code>.app-shell</code> - Main container - <code>.app-shell-{persona}</code> - Persona-themed app - <code>.app-header</code> - Header - <code>.app-main</code> - Main content - <code>.app-footer</code> - Footer with input</p>"},{"location":"api/frontend/#next-steps","title":"Next Steps","text":"<ul> <li>REST API - Backend API reference</li> <li>Backend Modules - Python documentation</li> <li>Frontend Architecture - Design patterns</li> </ul>"},{"location":"api/rest-api/","title":"REST API Reference","text":"<p>Complete API documentation for the MARC backend.</p>"},{"location":"api/rest-api/#base-url","title":"Base URL","text":"<pre><code>http://localhost:8001\n</code></pre>"},{"location":"api/rest-api/#interactive-documentation","title":"Interactive Documentation","text":"<p>FastAPI provides automatic interactive documentation:</p> <ul> <li>Swagger UI: http://localhost:8001/docs</li> <li>ReDoc: http://localhost:8001/redoc</li> <li>OpenAPI JSON: http://localhost:8001/openapi.json</li> </ul>"},{"location":"api/rest-api/#endpoints","title":"Endpoints","text":""},{"location":"api/rest-api/#get-health","title":"GET /health","text":"<p>Health check endpoint with model status.</p> <p>Response: 200 OK</p> <pre><code>{\n  \"status\": \"ok\",\n  \"model\": \"Qwen/Qwen3-4B\",\n  \"engine_ready\": true\n}\n</code></pre> <p>Response: 503 Service Unavailable</p> <pre><code>{\n  \"status\": \"ok\",\n  \"model\": null,\n  \"engine_ready\": false\n}\n</code></pre> <p>Example: <pre><code>curl http://localhost:8001/health\n</code></pre></p>"},{"location":"api/rest-api/#post-generate","title":"POST /generate","text":"<p>Generate chat completion with optional streaming.</p> <p>Request Body:</p> <pre><code>{\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"You are a software developer...\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"I need user authentication\"\n    }\n  ],\n  \"stream\": true,\n  \"max_tokens\": 512,\n  \"temperature\": 0.7,\n  \"top_p\": 0.95,\n  \"presence_penalty\": 0.0,\n  \"frequency_penalty\": 0.0,\n  \"stop\": null,\n  \"persona\": \"developer\"\n}\n</code></pre> <p>Request Fields:</p> Field Type Required Default Description messages array Yes - Array of ChatMessage objects stream boolean No true Enable token streaming max_tokens integer No 512 Maximum tokens to generate (\u22651) temperature float No 0.7 Sampling temperature (0.0-2.0) top_p float No 0.95 Nucleus sampling (0.0-1.0) presence_penalty float No 0.0 Presence penalty (-2.0 to 2.0) frequency_penalty float No 0.0 Frequency penalty (-2.0 to 2.0) stop array No null Stop sequences persona string No null Persona identifier (informational) <p>ChatMessage Object:</p> <pre><code>{\n  \"role\": \"system\" | \"user\" | \"assistant\",\n  \"content\": \"Message text\"\n}\n</code></pre> <p>Streaming Response (Content-Type: <code>application/x-ndjson</code>):</p> <p>Each line is a JSON object:</p> <pre><code>{\"type\": \"token\", \"delta\": \"REQ\", \"content\": \"REQ\", \"request_id\": \"abc123\"}\n{\"type\": \"token\", \"delta\": \"-DEV\", \"content\": \"REQ-DEV\", \"request_id\": \"abc123\"}\n{\"type\": \"token\", \"delta\": \"-001\", \"content\": \"REQ-DEV-001\", \"request_id\": \"abc123\"}\n{\"type\": \"done\", \"content\": \"REQ-DEV-001...\", \"finish_reason\": \"stop\", \"request_id\": \"abc123\"}\n</code></pre> <p>Response Event Types:</p> Type Fields Description token delta, content, request_id Incremental token done content, finish_reason, request_id Generation complete error message, request_id Error occurred <p>Finish Reasons: - <code>stop</code>: Natural completion - <code>length</code>: Reached max_tokens - <code>abort</code>: Request cancelled</p> <p>Non-Streaming Response (Content-Type: <code>application/json</code>):</p> <pre><code>{\n  \"output\": \"Generated requirement text...\",\n  \"finish_reason\": \"stop\",\n  \"request_id\": \"abc123\"\n}\n</code></pre> <p>Example (streaming): <pre><code>curl -X POST http://localhost:8001/generate \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"messages\": [\n      {\"role\": \"system\", \"content\": \"You are a developer.\"},\n      {\"role\": \"user\", \"content\": \"Build authentication\"}\n    ],\n    \"stream\": true\n  }'\n</code></pre></p> <p>Example (non-streaming): <pre><code>curl -X POST http://localhost:8001/generate \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"messages\": [\n      {\"role\": \"user\", \"content\": \"Build authentication\"}\n    ],\n    \"stream\": false\n  }'\n</code></pre></p> <p>Example (Python): <pre><code>import requests\n\nresponse = requests.post(\n    'http://localhost:8001/generate',\n    json={\n        'messages': [\n            {'role': 'system', 'content': 'You are a developer.'},\n            {'role': 'user', 'content': 'Build authentication'}\n        ],\n        'stream': False,\n        'max_tokens': 512,\n        'temperature': 0.7\n    }\n)\n\nresult = response.json()\nprint(result['output'])\n</code></pre></p> <p>Example (Python streaming): <pre><code>import requests\nimport json\n\nresponse = requests.post(\n    'http://localhost:8001/generate',\n    json={\n        'messages': [\n            {'role': 'user', 'content': 'Build authentication'}\n        ],\n        'stream': True\n    },\n    stream=True\n)\n\nfor line in response.iter_lines():\n    if line:\n        data = json.loads(line)\n        if data['type'] == 'token':\n            print(data['delta'], end='', flush=True)\n        elif data['type'] == 'done':\n            print(f\"\\n\\nFinish reason: {data['finish_reason']}\")\n</code></pre></p>"},{"location":"api/rest-api/#post-apigenerate","title":"POST /api/generate","text":"<p>Alias for <code>/generate</code> endpoint. Identical behavior.</p>"},{"location":"api/rest-api/#error-responses","title":"Error Responses","text":""},{"location":"api/rest-api/#400-bad-request","title":"400 Bad Request","text":"<p>Invalid request payload or parameters.</p> <pre><code>{\n  \"detail\": \"role must be one of ['assistant', 'system', 'user']\"\n}\n</code></pre>"},{"location":"api/rest-api/#422-unprocessable-entity","title":"422 Unprocessable Entity","text":"<p>Validation error (Pydantic).</p> <pre><code>{\n  \"detail\": [\n    {\n      \"loc\": [\"body\", \"messages\"],\n      \"msg\": \"field required\",\n      \"type\": \"value_error.missing\"\n    }\n  ]\n}\n</code></pre>"},{"location":"api/rest-api/#500-internal-server-error","title":"500 Internal Server Error","text":"<p>Server-side error during generation.</p> <pre><code>{\n  \"detail\": \"Internal server error\"\n}\n</code></pre>"},{"location":"api/rest-api/#streaming-error","title":"Streaming Error","text":"<p>Error during streaming (sent as NDJSON):</p> <pre><code>{\"type\": \"error\", \"message\": \"Generation failed\", \"request_id\": \"abc123\"}\n</code></pre>"},{"location":"api/rest-api/#rate-limiting","title":"Rate Limiting","text":"<p>Currently not implemented. Recommended for production:</p> <ul> <li>10 requests per minute per IP</li> <li>100 requests per hour per IP</li> <li>Use headers: <code>X-RateLimit-Limit</code>, <code>X-RateLimit-Remaining</code></li> </ul>"},{"location":"api/rest-api/#authentication","title":"Authentication","text":"<p>Currently not implemented. Recommended for production:</p> <pre><code>curl -X POST http://localhost:8001/generate \\\n  -H \"X-API-Key: your-api-key\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{...}'\n</code></pre>"},{"location":"api/rest-api/#cors","title":"CORS","text":"<p>Configured via <code>BACKEND_ALLOW_ORIGINS</code> environment variable.</p> <p>Default: <code>*</code> (allow all origins)</p> <p>Recommended: Specific origins only <pre><code>export BACKEND_ALLOW_ORIGINS=\"http://localhost:5173,https://yourdomain.com\"\n</code></pre></p>"},{"location":"api/rest-api/#websocket-support","title":"WebSocket Support","text":"<p>Not currently implemented. Future feature for real-time bidirectional communication.</p>"},{"location":"api/rest-api/#versioning","title":"Versioning","text":"<p>Current API version: <code>v0.1.0</code></p> <p>No versioning in URLs yet. Future versions may use: - Path versioning: <code>/v1/generate</code>, <code>/v2/generate</code> - Header versioning: <code>Accept: application/vnd.marc.v1+json</code></p>"},{"location":"api/rest-api/#client-libraries","title":"Client Libraries","text":""},{"location":"api/rest-api/#javascripttypescript","title":"JavaScript/TypeScript","text":"<pre><code>// src/frontend/src/api/client.js\nexport async function streamGenerate(payload, onChunk, signal) {\n  const response = await fetch(`${API_BASE_URL}/api/generate`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(payload),\n    signal\n  });\n\n  const reader = response.body.getReader();\n  const decoder = new TextDecoder();\n  let buffer = '';\n\n  while (true) {\n    const { done, value } = await reader.read();\n    if (done) break;\n\n    buffer += decoder.decode(value, { stream: true });\n    const lines = buffer.split('\\n');\n    buffer = lines.pop() || '';\n\n    for (const line of lines) {\n      if (line.trim()) {\n        const data = JSON.parse(line);\n        if (data.type === 'token') {\n          onChunk(data.delta);\n        } else if (data.type === 'error') {\n          throw new Error(data.message);\n        }\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"api/rest-api/#python","title":"Python","text":"<pre><code># client.py\nimport requests\nimport json\nfrom typing import Iterator, Dict\n\ndef generate(messages: list, stream: bool = True, **kwargs) -&gt; Dict | Iterator[str]:\n    payload = {\n        'messages': messages,\n        'stream': stream,\n        **kwargs\n    }\n\n    response = requests.post(\n        'http://localhost:8001/generate',\n        json=payload,\n        stream=stream\n    )\n\n    if stream:\n        def token_generator():\n            for line in response.iter_lines():\n                if line:\n                    data = json.loads(line)\n                    if data['type'] == 'token':\n                        yield data['delta']\n                    elif data['type'] == 'error':\n                        raise Exception(data['message'])\n\n        return token_generator()\n    else:\n        return response.json()\n</code></pre>"},{"location":"api/rest-api/#testing-the-api","title":"Testing the API","text":""},{"location":"api/rest-api/#using-curl","title":"Using curl","text":"<pre><code># Health check\ncurl http://localhost:8001/health\n\n# Simple generation\ncurl -X POST http://localhost:8001/generate \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"messages\":[{\"role\":\"user\",\"content\":\"Test\"}],\"stream\":false}'\n\n# Streaming generation\ncurl -X POST http://localhost:8001/generate \\\n  -H \"Content-Type: application/json\" \\\n  -N \\\n  -d '{\"messages\":[{\"role\":\"user\",\"content\":\"Test\"}],\"stream\":true}'\n</code></pre>"},{"location":"api/rest-api/#using-httpie","title":"Using HTTPie","text":"<pre><code># Install: pip install httpie\n\n# Health check\nhttp GET http://localhost:8001/health\n\n# Generation\nhttp POST http://localhost:8001/generate \\\n  messages:='[{\"role\":\"user\",\"content\":\"Test\"}]' \\\n  stream:=false\n</code></pre>"},{"location":"api/rest-api/#using-postman","title":"Using Postman","text":"<ol> <li>Import OpenAPI spec: http://localhost:8001/openapi.json</li> <li>All endpoints auto-configured with examples</li> <li>Test streaming with \"Send and Download\" option</li> </ol>"},{"location":"api/rest-api/#next-steps","title":"Next Steps","text":"<ul> <li>Backend Modules - Python module documentation</li> <li>Frontend Components - React component API</li> <li>Configuration - API configuration options</li> </ul>"},{"location":"architecture/backend/","title":"Backend Architecture","text":"<p>Deep dive into the FastAPI backend architecture, design patterns, and implementation details.</p>"},{"location":"architecture/backend/#technology-stack","title":"Technology Stack","text":"<ul> <li>FastAPI: Modern async web framework</li> <li>Uvicorn: ASGI server for FastAPI</li> <li>vLLM: Optimized LLM inference engine</li> <li>Pydantic: Data validation and settings management</li> <li>Python 3.10+: Type hints and modern Python features</li> </ul>"},{"location":"architecture/backend/#module-structure","title":"Module Structure","text":"<pre><code>src/backend/\n\u251c\u2500\u2500 app/\n\u2502   \u251c\u2500\u2500 __init__.py         # Module initialization\n\u2502   \u2514\u2500\u2500 main.py             # FastAPI application\n\u2514\u2500\u2500 requirements.txt        # Python dependencies\n</code></pre>"},{"location":"architecture/backend/#core-components","title":"Core Components","text":""},{"location":"architecture/backend/#1-fastapi-application","title":"1. FastAPI Application","text":"<p>Located in <code>src/backend/app/main.py:121</code></p> <pre><code>app = FastAPI(title=\"SEproj Chat Backend\", version=\"0.1.0\")\n</code></pre> <p>Configuration: - CORS middleware for cross-origin requests - Automatic OpenAPI documentation - Request/response validation</p>"},{"location":"architecture/backend/#2-enginemanager-singleton","title":"2. EngineManager (Singleton)","text":"<p>Located in <code>src/backend/app/main.py:77</code></p> <p>Purpose: Lazy initialization and caching of the vLLM engine</p> <p>Key Methods: - <code>get_engine()</code>: Returns singleton AsyncLLMEngine instance - <code>is_ready</code>: Property to check if engine is initialized</p> <p>Implementation: <pre><code>class EngineManager:\n    def __init__(self) -&gt; None:\n        self._engine: Optional[AsyncLLMEngine] = None\n        self._lock = asyncio.Lock()\n\n    async def get_engine(self) -&gt; AsyncLLMEngine:\n        if self._engine is not None:\n            return self._engine\n\n        async with self._lock:\n            if self._engine is not None:\n                return self._engine\n            # Initialize engine...\n</code></pre></p> <p>Thread Safety: Uses asyncio.Lock for concurrent access</p>"},{"location":"architecture/backend/#3-data-models-pydantic","title":"3. Data Models (Pydantic)","text":""},{"location":"architecture/backend/#chatmessage","title":"ChatMessage","text":"<p>Located in <code>src/backend/app/main.py:37</code></p> <pre><code>class ChatMessage(BaseModel):\n    role: str  # system|user|assistant\n    content: str\n</code></pre> <p>Validation: - Role must be one of: system, user, assistant - Custom validator ensures role validity</p>"},{"location":"architecture/backend/#generaterequest","title":"GenerateRequest","text":"<p>Located in <code>src/backend/app/main.py:52</code></p> <pre><code>class GenerateRequest(BaseModel):\n    messages: List[ChatMessage]\n    stream: bool = True\n    max_tokens: int = DEFAULT_MAX_TOKENS\n    temperature: float = DEFAULT_TEMPERATURE\n    top_p: float = DEFAULT_TOP_P\n    presence_penalty: float = 0.0\n    frequency_penalty: float = 0.0\n    stop: Optional[List[str]] = None\n    persona: Optional[str] = None\n</code></pre> <p>Validation Rules: - <code>max_tokens</code>: \u2265 1 - <code>temperature</code>: 0.0 to 2.0 - <code>top_p</code>: 0.0 to 1.0 - Penalties: -2.0 to 2.0</p>"},{"location":"architecture/backend/#api-endpoints","title":"API Endpoints","text":""},{"location":"architecture/backend/#get-health","title":"GET /health","text":"<p>Located in <code>src/backend/app/main.py:213</code></p> <p>Purpose: Health check with engine status</p> <p>Response: <pre><code>{\n  \"status\": \"ok\",\n  \"model\": \"Qwen/Qwen3-4B\",\n  \"engine_ready\": true\n}\n</code></pre></p> <p>Status Codes: - 200: Model configured and ready - 503: Model not configured</p>"},{"location":"architecture/backend/#post-generate","title":"POST /generate","text":"<p>Located in <code>src/backend/app/main.py:226</code></p> <p>Purpose: Generate chat completions with optional streaming</p> <p>Request Body: <pre><code>{\n  \"messages\": [\n    {\"role\": \"system\", \"content\": \"You are a developer...\"},\n    {\"role\": \"user\", \"content\": \"Build user authentication\"}\n  ],\n  \"stream\": true,\n  \"max_tokens\": 512,\n  \"temperature\": 0.7,\n  \"top_p\": 0.95\n}\n</code></pre></p> <p>Streaming Response (NDJSON): <pre><code>{\"type\": \"token\", \"delta\": \"REQ\", \"content\": \"REQ\", \"request_id\": \"abc123\"}\n{\"type\": \"token\", \"delta\": \"-DEV\", \"content\": \"REQ-DEV\", \"request_id\": \"abc123\"}\n{\"type\": \"done\", \"content\": \"...\", \"finish_reason\": \"stop\", \"request_id\": \"abc123\"}\n</code></pre></p> <p>Non-Streaming Response: <pre><code>{\n  \"output\": \"Generated requirement...\",\n  \"finish_reason\": \"stop\",\n  \"request_id\": \"abc123\"\n}\n</code></pre></p>"},{"location":"architecture/backend/#post-apigenerate","title":"POST /api/generate","text":"<p>Alias for <code>/generate</code> to support different routing patterns.</p>"},{"location":"architecture/backend/#request-processing-flow","title":"Request Processing Flow","text":""},{"location":"architecture/backend/#1-request-validation","title":"1. Request Validation","text":"<pre><code>@app.post(\"/generate\")\nasync def generate(payload: GenerateRequest):\n    # FastAPI automatically validates payload against GenerateRequest model\n</code></pre> <p>Pydantic ensures: - All required fields present - Field types correct - Values within allowed ranges - Custom validators pass</p>"},{"location":"architecture/backend/#2-prompt-formatting","title":"2. Prompt Formatting","text":"<p>Located in <code>src/backend/app/main.py:132</code></p> <pre><code>def format_chat_prompt(messages: List[ChatMessage]) -&gt; str:\n    prompt_segments: List[str] = []\n    for message in messages:\n        role = message.role.capitalize()\n        content = message.content.strip()\n        prompt_segments.append(f\"{role}: {content}\")\n\n    prompt_segments.append(\"Assistant:\")\n    return \"\\n\\n\".join(prompt_segments)\n</code></pre> <p>Format: ``` System: You are a developer...</p> <p>User: Build user authentication</p>"},{"location":"architecture/frontend/","title":"Frontend Architecture","text":"<p>Deep dive into the React frontend architecture, component structure, and state management.</p>"},{"location":"architecture/frontend/#technology-stack","title":"Technology Stack","text":"<ul> <li>React 18.3+: UI library with hooks</li> <li>Vite 5.1+: Fast build tool and dev server</li> <li>JavaScript (ES6+): Modern JavaScript features</li> <li>CSS: Custom styling with CSS variables</li> </ul>"},{"location":"architecture/frontend/#project-structure","title":"Project Structure","text":"<pre><code>src/frontend/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 components/          # React components\n\u2502   \u2502   \u251c\u2500\u2500 ChatWindow.jsx   # Message display\n\u2502   \u2502   \u251c\u2500\u2500 Login.jsx        # Persona selection\n\u2502   \u2502   \u2514\u2500\u2500 MessageInput.jsx # User input\n\u2502   \u251c\u2500\u2500 hooks/               # Custom React hooks\n\u2502   \u2502   \u2514\u2500\u2500 useChat.js       # Chat state management\n\u2502   \u251c\u2500\u2500 api/                 # API client\n\u2502   \u2502   \u2514\u2500\u2500 client.js        # HTTP/streaming client\n\u2502   \u251c\u2500\u2500 config/              # Configuration\n\u2502   \u2502   \u2514\u2500\u2500 personas.js      # Persona definitions\n\u2502   \u251c\u2500\u2500 App.jsx              # Root component\n\u2502   \u251c\u2500\u2500 main.jsx             # Entry point\n\u2502   \u2514\u2500\u2500 index.css            # Global styles\n\u251c\u2500\u2500 public/                  # Static assets\n\u251c\u2500\u2500 package.json             # Dependencies\n\u251c\u2500\u2500 vite.config.js           # Vite configuration\n\u2514\u2500\u2500 index.html               # HTML template\n</code></pre>"},{"location":"architecture/frontend/#core-components","title":"Core Components","text":""},{"location":"architecture/frontend/#app-component","title":"App Component","text":"<p>File: <code>src/frontend/src/App.jsx</code></p> <p>Responsibilities: - Top-level routing (login vs main app) - Persona state management - Chat lifecycle coordination</p> <p>State: <pre><code>const [personaKey, setPersonaKey] = useState(null);\nconst { messages, sendMessage, cancel, reset, status } = useChat(activePersona.key);\n</code></pre></p> <p>Key Features: - Conditional rendering based on persona selection - Integration with useChat hook - Action buttons (Reset, Switch Role)</p>"},{"location":"architecture/frontend/#chatwindow-component","title":"ChatWindow Component","text":"<p>File: <code>src/frontend/src/components/ChatWindow.jsx</code></p> <p>Purpose: Display chat message history with role-based styling</p> <p>Props: <pre><code>{\n  messages: Array&lt;{\n    role: 'user' | 'assistant',\n    content: string\n  }&gt;\n}\n</code></pre></p> <p>Features: - Auto-scroll to latest message - Markdown rendering support - Role-based message styling - Empty state handling</p>"},{"location":"architecture/frontend/#messageinput-component","title":"MessageInput Component","text":"<p>File: <code>src/frontend/src/components/MessageInput.jsx</code></p> <p>Purpose: User input with send/cancel controls</p> <p>Props: <pre><code>{\n  onSend: (message: string) =&gt; void,\n  onCancel: () =&gt; void,\n  disabled: boolean,\n  status: 'idle' | 'pending' | 'error'\n}\n</code></pre></p> <p>Features: - Enter key to send - Disabled state during generation - Cancel button for streaming - Auto-focus and auto-resize</p>"},{"location":"architecture/frontend/#login-component","title":"Login Component","text":"<p>File: <code>src/frontend/src/components/Login.jsx</code></p> <p>Purpose: Persona selection screen</p> <p>Props: <pre><code>{\n  personas: Object&lt;string, PersonaConfig&gt;,\n  onSelect: (personaKey: string) =&gt; void\n}\n</code></pre></p> <p>Features: - Grid layout of persona cards - Color-coded personas - Hover effects - Responsive design</p>"},{"location":"architecture/frontend/#custom-hooks","title":"Custom Hooks","text":""},{"location":"architecture/frontend/#usechat-hook","title":"useChat Hook","text":"<p>File: <code>src/frontend/src/hooks/useChat.js</code></p> <p>Purpose: Centralized chat state and API interaction</p> <p>Interface: <pre><code>const {\n  messages,      // Array of chat messages\n  sendMessage,   // (content: string) =&gt; Promise&lt;void&gt;\n  cancel,        // () =&gt; void\n  reset,         // () =&gt; void\n  status         // 'idle' | 'pending' | 'error'\n} = useChat(personaKey);\n</code></pre></p> <p>State Management: <pre><code>const [messages, setMessages] = useState([]);\nconst [status, setStatus] = useState('idle');\nconst abortControllerRef = useRef(null);\n</code></pre></p> <p>Key Features: - Async message sending with streaming - Abort controller for cancellation - Error handling and recovery - Message history management</p> <p>Send Message Flow: 1. Add user message to history 2. Set status to 'pending' 3. Create abort controller 4. Call streaming API 5. Accumulate tokens in assistant message 6. Update UI in real-time 7. Set status to 'idle' on completion</p>"},{"location":"architecture/frontend/#api-client","title":"API Client","text":""},{"location":"architecture/frontend/#streamgenerate-function","title":"streamGenerate Function","text":"<p>File: <code>src/frontend/src/api/client.js</code></p> <p>Purpose: Handle streaming NDJSON responses from backend</p> <p>Signature: <pre><code>async function streamGenerate(payload, onChunk, signal)\n</code></pre></p> <p>Parameters: - <code>payload</code>: GenerateRequest object - <code>onChunk</code>: Callback for each token chunk - <code>signal</code>: AbortSignal for cancellation</p> <p>Implementation: <pre><code>const response = await fetch(`${API_BASE_URL}/api/generate`, {\n  method: 'POST',\n  headers: { 'Content-Type': 'application/json' },\n  body: JSON.stringify(payload),\n  signal\n});\n\nconst reader = response.body.getReader();\nconst decoder = new TextDecoder();\n\nwhile (true) {\n  const { done, value } = await reader.read();\n  if (done) break;\n\n  const chunk = decoder.decode(value);\n  const lines = chunk.split('\\n').filter(Boolean);\n\n  for (const line of lines) {\n    const data = JSON.parse(line);\n    if (data.type === 'token') {\n      onChunk(data.delta);\n    }\n  }\n}\n</code></pre></p>"},{"location":"architecture/frontend/#configuration","title":"Configuration","text":""},{"location":"architecture/frontend/#personas-configuration","title":"Personas Configuration","text":"<p>File: <code>src/frontend/src/config/personas.js</code></p> <p>Structure: <pre><code>export const PERSONAS = {\n  developer: {\n    key: 'developer',\n    label: 'Developer',\n    description: 'Technical feasibility and implementation concerns',\n    systemPrompt: 'You are a software developer...',\n    color: '#2563eb'\n  },\n  // ... other personas\n};\n\nexport function getPersonaConfig(key) {\n  return PERSONAS[key] || PERSONAS.developer;\n}\n</code></pre></p> <p>Persona Properties: - <code>key</code>: Unique identifier - <code>label</code>: Display name - <code>description</code>: Short description - <code>systemPrompt</code>: LLM system message - <code>color</code>: Theme color (hex)</p>"},{"location":"architecture/frontend/#api-configuration","title":"API Configuration","text":"<p>File: <code>src/frontend/src/api/client.js</code></p> <pre><code>export const API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:8001';\nexport const DEFAULT_MAX_TOKENS = 512;\nexport const DEFAULT_TEMPERATURE = 0.7;\n</code></pre>"},{"location":"architecture/frontend/#state-management","title":"State Management","text":""},{"location":"architecture/frontend/#local-state-pattern","title":"Local State Pattern","text":"<p>MARC uses React's built-in state management (useState, useReducer) rather than external libraries like Redux or Zustand.</p> <p>Rationale: - Simple application state - No complex global state needs - Better performance for small apps - Easier to understand and maintain</p> <p>State Locations: - App.jsx: Persona selection - useChat: Message history, status - Components: Local UI state (input value, etc.)</p>"},{"location":"architecture/frontend/#styling","title":"Styling","text":""},{"location":"architecture/frontend/#css-variables","title":"CSS Variables","text":"<p>Global theme colors defined in <code>index.css</code>:</p> <pre><code>:root {\n  --color-developer: #2563eb;\n  --color-pm: #059669;\n  --color-customer: #dc2626;\n  --color-sales: #7c3aed;\n  --color-shareholder: #ea580c;\n}\n</code></pre>"},{"location":"architecture/frontend/#component-styling","title":"Component Styling","text":"<ul> <li>Scoped classes: Each component uses unique class names</li> <li>BEM-like naming: <code>.component__element--modifier</code></li> <li>Responsive: Mobile-first approach with media queries</li> </ul>"},{"location":"architecture/frontend/#performance-optimizations","title":"Performance Optimizations","text":""},{"location":"architecture/frontend/#current-optimizations","title":"Current Optimizations","text":"<ol> <li>React.memo: Prevent unnecessary re-renders (if needed)</li> <li>useCallback: Memoize callbacks in useChat</li> <li>Streaming: Real-time token display without waiting</li> <li>Debouncing: Input debouncing for better UX</li> </ol>"},{"location":"architecture/frontend/#future-optimizations","title":"Future Optimizations","text":"<ol> <li> <p>Code Splitting: Lazy load components <pre><code>const ChatWindow = lazy(() =&gt; import('./components/ChatWindow'));\n</code></pre></p> </li> <li> <p>Virtual Scrolling: For long chat histories</p> </li> <li>Service Worker: Offline support and caching</li> <li>Bundle Size: Analyze and reduce bundle size</li> </ol>"},{"location":"architecture/frontend/#error-handling","title":"Error Handling","text":""},{"location":"architecture/frontend/#error-boundaries","title":"Error Boundaries","text":"<p>Add error boundaries to catch component errors:</p> <pre><code>class ErrorBoundary extends React.Component {\n  componentDidCatch(error, errorInfo) {\n    console.error('Component error:', error, errorInfo);\n  }\n\n  render() {\n    return this.props.children;\n  }\n}\n</code></pre>"},{"location":"architecture/frontend/#api-error-handling","title":"API Error Handling","text":"<p>In useChat hook:</p> <pre><code>try {\n  await streamGenerate(payload, onChunk, signal);\n} catch (error) {\n  if (error.name === 'AbortError') {\n    console.log('Request cancelled');\n  } else {\n    setStatus('error');\n    console.error('Generation failed:', error);\n  }\n}\n</code></pre>"},{"location":"architecture/frontend/#testing-strategy","title":"Testing Strategy","text":""},{"location":"architecture/frontend/#component-testing","title":"Component Testing","text":"<p>Use React Testing Library:</p> <pre><code>import { render, screen, fireEvent } from '@testing-library/react';\nimport MessageInput from './MessageInput';\n\ntest('sends message on enter key', () =&gt; {\n  const onSend = jest.fn();\n  render(&lt;MessageInput onSend={onSend} /&gt;);\n\n  const input = screen.getByRole('textbox');\n  fireEvent.change(input, { target: { value: 'Test' } });\n  fireEvent.keyPress(input, { key: 'Enter', code: 13 });\n\n  expect(onSend).toHaveBeenCalledWith('Test');\n});\n</code></pre>"},{"location":"architecture/frontend/#hook-testing","title":"Hook Testing","text":"<p>Use React Hooks Testing Library:</p> <pre><code>import { renderHook, act } from '@testing-library/react-hooks';\nimport { useChat } from './useChat';\n\ntest('sends message and updates history', async () =&gt; {\n  const { result } = renderHook(() =&gt; useChat('developer'));\n\n  await act(async () =&gt; {\n    await result.current.sendMessage('Hello');\n  });\n\n  expect(result.current.messages).toHaveLength(2); // user + assistant\n});\n</code></pre>"},{"location":"architecture/frontend/#build-deployment","title":"Build &amp; Deployment","text":""},{"location":"architecture/frontend/#development","title":"Development","text":"<pre><code>npm run dev\n</code></pre> <p>Features: - Hot Module Replacement (HMR) - Fast refresh - Source maps</p>"},{"location":"architecture/frontend/#production-build","title":"Production Build","text":"<pre><code>npm run build\n</code></pre> <p>Output: - Minified JavaScript - Optimized CSS - Asset fingerprinting - Tree-shaken bundles</p>"},{"location":"architecture/frontend/#preview-production-build","title":"Preview Production Build","text":"<pre><code>npm run preview\n</code></pre>"},{"location":"architecture/frontend/#next-steps","title":"Next Steps","text":"<ul> <li>Backend Architecture - Backend design patterns</li> <li>Multi-Agent System - Planned features</li> <li>API Reference - Component API docs</li> </ul>"},{"location":"architecture/multi-agent/","title":"Multi-Agent System Architecture","text":"<p>This document outlines the planned multi-agent collaboration system for MARC.</p>"},{"location":"architecture/multi-agent/#current-status","title":"Current Status","text":"<p>Version 1.0: Single-agent (persona) interactions - Users select one persona at a time - Each persona generates requirements independently - No cross-persona collaboration</p> <p>Future Versions: Multi-agent collaboration - Orchestrator coordinates multiple personas - Agents discuss and refine requirements - Conflict detection and resolution - Synthesized, unified requirements</p>"},{"location":"architecture/multi-agent/#planned-architecture","title":"Planned Architecture","text":""},{"location":"architecture/multi-agent/#multi-agent-workflow","title":"Multi-Agent Workflow","text":"<pre><code>User Input: \"Build user authentication system\"\n                    \u2193\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502  Orchestrator Agent   \u2502\n        \u2502  - Breaks down task   \u2502\n        \u2502  - Assigns to agents  \u2502\n        \u2502  - Synthesizes results\u2502\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                    \u2502\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502                               \u2502\n    \u2193         \u2193         \u2193          \u2193         \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502Developer\u2502Product \u2502Customer \u2502Sales   \u2502Shareholder \u2502\n\u2502         \u2502Manager \u2502         \u2502        \u2502            \u2502\n\u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518\n     \u2502        \u2502         \u2502        \u2502           \u2502\n     \u2193        \u2193         \u2193        \u2193           \u2193\n  REQ-DEV  REQ-PM   REQ-CUST  REQ-SAL   REQ-SH\n     \u2502        \u2502         \u2502        \u2502           \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                      \u2502\n                      \u2193\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502   Conflict Detector     \u2502\n        \u2502   - Find contradictions \u2502\n        \u2502   - Identify overlaps   \u2502\n        \u2502   - Prioritize conflicts\u2502\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2502\n                     \u2193\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502  Discussion Round       \u2502\n        \u2502  - Agents negotiate     \u2502\n        \u2502  - Refine requirements  \u2502\n        \u2502  - Reach consensus      \u2502\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2502\n                     \u2193\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502  Requirement Synthesizer\u2502\n        \u2502  - Merge compatible reqs\u2502\n        \u2502  - Resolve conflicts    \u2502\n        \u2502  - Generate final doc   \u2502\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2502\n                     \u2193\n          IEEE 29148 Compliant\n         Requirements Document\n</code></pre>"},{"location":"architecture/multi-agent/#agent-types","title":"Agent Types","text":""},{"location":"architecture/multi-agent/#1-orchestrator-agent","title":"1. Orchestrator Agent","text":"<p>Role: Coordinate multi-agent requirement generation</p> <p>Responsibilities: - Parse user input and understand intent - Determine which personas should participate - Assign specific aspects to each agent - Collect and synthesize agent outputs - Ensure completeness and consistency</p> <p>Example: <pre><code>User: \"Build user authentication\"\n\nOrchestrator:\n- Developer: Focus on implementation, security, tech stack\n- Product Manager: Define user stories, acceptance criteria\n- Customer: Address usability, simplicity concerns\n- Shareholder: Analyze cost, ROI, strategic value\n</code></pre></p>"},{"location":"architecture/multi-agent/#2-specialist-agents-personas","title":"2. Specialist Agents (Personas)","text":"<p>Current Personas: - Developer - Product Manager - Customer - Sales - Shareholder</p> <p>Capabilities: - Generate requirements from their perspective - Critique other agents' requirements - Propose refinements - Negotiate conflicts</p>"},{"location":"architecture/multi-agent/#3-conflict-detector","title":"3. Conflict Detector","text":"<p>Role: Identify contradictions and overlaps</p> <p>Detection Types:</p> <p>Direct Contradiction: <pre><code>Developer: \"Use bcrypt for password hashing\"\nProduct Manager: \"Use MD5 for faster performance\"\nConflict: Security vs Performance\n</code></pre></p> <p>Implicit Conflict: <pre><code>Customer: \"One-click login without password\"\nDeveloper: \"Strong password requirements with 2FA\"\nConflict: Convenience vs Security\n</code></pre></p> <p>Priority Conflict: <pre><code>Product Manager: \"Authentication is High priority\"\nShareholder: \"Authentication is Low priority, focus on features\"\nConflict: Different priority assessments\n</code></pre></p>"},{"location":"architecture/multi-agent/#4-discussion-facilitator","title":"4. Discussion Facilitator","text":"<p>Role: Enable agents to negotiate and refine</p> <p>Process: 1. Present conflict to relevant agents 2. Allow each agent to explain rationale 3. Facilitate negotiation rounds 4. Reach consensus or escalate 5. Document resolution reasoning</p> <p>Example Discussion: <pre><code>Facilitator: \"Developer suggests bcrypt, PM suggests MD5. Discuss.\"\n\nDeveloper: \"MD5 is cryptographically broken. Bcrypt is industry standard.\"\n\nPM: \"Understood. Security is more important than marginal performance gain.\"\n\nResolution: \"Use bcrypt for password hashing\"\n</code></pre></p>"},{"location":"architecture/multi-agent/#5-requirement-synthesizer","title":"5. Requirement Synthesizer","text":"<p>Role: Merge compatible requirements and resolve conflicts</p> <p>Synthesis Strategies:</p> <p>Merging: Combine non-conflicting requirements: <pre><code>Developer: \"Hash passwords with bcrypt\"\nCustomer: \"Simple login form\"\n\u2192 REQ-001: Simple login form with bcrypt password hashing\n</code></pre></p> <p>Prioritization: Resolve by importance: <pre><code>Developer: \"Strong password requirements\"\nCustomer: \"Easy password entry\"\n\u2192 REQ-002: Balanced password policy (8+ chars, but no special char requirement)\n</code></pre></p> <p>Decomposition: Split conflicting requirements: <pre><code>PM: \"Social login OR email/password\"\nCustomer: \"Want both options\"\n\u2192 REQ-003: Email/password authentication\n\u2192 REQ-004: Social login integration (OAuth)\n</code></pre></p>"},{"location":"architecture/multi-agent/#collaboration-protocols","title":"Collaboration Protocols","text":""},{"location":"architecture/multi-agent/#protocol-1-sequential-generation","title":"Protocol 1: Sequential Generation","text":"<p>Agents generate requirements in sequence, building on previous outputs.</p> <pre><code>orchestrator.prompt_agent(\"developer\", user_input)\ndev_req = developer.generate()\n\norchestrator.prompt_agent(\"product_manager\", user_input, context=dev_req)\npm_req = product_manager.generate()\n\n# Continue for all agents...\n</code></pre>"},{"location":"architecture/multi-agent/#protocol-2-parallel-generation","title":"Protocol 2: Parallel Generation","text":"<p>All agents generate independently, then synthesize.</p> <pre><code>tasks = [\n    developer.generate(user_input),\n    product_manager.generate(user_input),\n    customer.generate(user_input),\n    sales.generate(user_input),\n    shareholder.generate(user_input)\n]\n\nrequirements = await asyncio.gather(*tasks)\nsynthesized = synthesizer.merge(requirements)\n</code></pre>"},{"location":"architecture/multi-agent/#protocol-3-iterative-refinement","title":"Protocol 3: Iterative Refinement","text":"<p>Multiple rounds of generation and critique.</p> <pre><code>round_1 = [agent.generate(user_input) for agent in agents]\n\nfor iteration in range(3):\n    critiques = [\n        agent.critique(other_requirements)\n        for agent in agents\n    ]\n\n    refinements = [\n        agent.refine(own_requirement, critiques)\n        for agent in agents\n    ]\n</code></pre>"},{"location":"architecture/multi-agent/#data-models","title":"Data Models","text":""},{"location":"architecture/multi-agent/#requirement","title":"Requirement","text":"<pre><code>class Requirement:\n    id: str  # REQ-{PERSONA}-{NUMBER}\n    persona: str\n    category: str  # Functional, Non-functional, etc.\n    priority: str  # High, Medium, Low\n    description: str\n    rationale: str\n    acceptance_criteria: List[str]\n    dependencies: List[str]\n    verification_method: str\n    conflicts: List[str]  # IDs of conflicting requirements\n</code></pre>"},{"location":"architecture/multi-agent/#conflict","title":"Conflict","text":"<pre><code>class Conflict:\n    id: str\n    type: str  # contradiction, priority, implicit\n    req_ids: List[str]\n    description: str\n    severity: str  # critical, major, minor\n    resolution: Optional[str]\n    resolved_by: Optional[str]  # agent that resolved\n</code></pre>"},{"location":"architecture/multi-agent/#discussion","title":"Discussion","text":"<pre><code>class Discussion:\n    id: str\n    conflict_id: str\n    participants: List[str]  # agent personas\n    messages: List[Message]\n    resolution: Optional[str]\n    consensus_reached: bool\n</code></pre>"},{"location":"architecture/multi-agent/#implementation-roadmap","title":"Implementation Roadmap","text":""},{"location":"architecture/multi-agent/#phase-1-basic-multi-agent-v11","title":"Phase 1: Basic Multi-Agent (v1.1)","text":"<ul> <li>[ ] Orchestrator that calls multiple personas</li> <li>[ ] Parallel requirement generation</li> <li>[ ] Simple concatenation of outputs</li> <li>[ ] UI to display all persona requirements side-by-side</li> </ul>"},{"location":"architecture/multi-agent/#phase-2-conflict-detection-v12","title":"Phase 2: Conflict Detection (v1.2)","text":"<ul> <li>[ ] Implement conflict detector</li> <li>[ ] Pattern matching for contradictions</li> <li>[ ] Highlight conflicts in UI</li> <li>[ ] Manual conflict resolution by user</li> </ul>"},{"location":"architecture/multi-agent/#phase-3-agent-discussion-v13","title":"Phase 3: Agent Discussion (v1.3)","text":"<ul> <li>[ ] Discussion protocol implementation</li> <li>[ ] Multi-turn agent conversations</li> <li>[ ] Negotiation strategies</li> <li>[ ] Automated conflict resolution (simple cases)</li> </ul>"},{"location":"architecture/multi-agent/#phase-4-advanced-synthesis-v20","title":"Phase 4: Advanced Synthesis (v2.0)","text":"<ul> <li>[ ] Intelligent requirement merging</li> <li>[ ] Priority-based resolution</li> <li>[ ] Requirement decomposition</li> <li>[ ] IEEE 29148 compliant unified document</li> </ul>"},{"location":"architecture/multi-agent/#phase-5-rag-integration-v21","title":"Phase 5: RAG Integration (v2.1)","text":"<ul> <li>[ ] Requirement database</li> <li>[ ] Vector embeddings for similarity search</li> <li>[ ] Retrieve similar past requirements</li> <li>[ ] Learn from historical data</li> </ul>"},{"location":"architecture/multi-agent/#technical-challenges","title":"Technical Challenges","text":""},{"location":"architecture/multi-agent/#challenge-1-context-window-limits","title":"Challenge 1: Context Window Limits","text":"<p>Problem: Multiple agent outputs may exceed LLM context Solutions: - Summarization agents - Hierarchical processing - Streaming synthesis</p>"},{"location":"architecture/multi-agent/#challenge-2-consistency","title":"Challenge 2: Consistency","text":"<p>Problem: Agents may generate incompatible formats Solutions: - Strict prompt engineering - Output validation - Post-processing normalization</p>"},{"location":"architecture/multi-agent/#challenge-3-infinite-discussion-loops","title":"Challenge 3: Infinite Discussion Loops","text":"<p>Problem: Agents may never reach consensus Solutions: - Maximum iteration limits - Escalation to user - Voting mechanisms</p>"},{"location":"architecture/multi-agent/#challenge-4-latency","title":"Challenge 4: Latency","text":"<p>Problem: Multiple agents = longer wait times Solutions: - Parallel generation - Caching common requirements - Progressive disclosure (show results as they arrive)</p>"},{"location":"architecture/multi-agent/#next-steps","title":"Next Steps","text":"<ul> <li>Overview - System architecture overview</li> <li>Backend Architecture - Backend implementation</li> <li>API Reference - API documentation</li> </ul>"},{"location":"architecture/overview/","title":"Architecture Overview","text":"<p>MARC follows a modern full-stack architecture with a FastAPI backend and React frontend, leveraging vLLM for efficient LLM inference.</p>"},{"location":"architecture/overview/#high-level-architecture","title":"High-Level Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        User Browser                         \u2502\n\u2502                   (http://localhost:5173)                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502 HTTP/WebSocket\n                         \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   React Frontend (Vite)                     \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502   Components   \u2502   Custom Hooks   \u2502   API Client      \u2502 \u2502\n\u2502  \u2502  - ChatWindow  \u2502   - useChat      \u2502   - streamAPI     \u2502 \u2502\n\u2502  \u2502  - Login       \u2502                  \u2502                   \u2502 \u2502\n\u2502  \u2502  - MessageInput\u2502                  \u2502                   \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502 REST API (HTTP/NDJSON)\n                         \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502               FastAPI Backend (Uvicorn)                     \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502   Endpoints    \u2502  EngineManager   \u2502   Data Models     \u2502 \u2502\n\u2502  \u2502  - /generate   \u2502  - get_engine()  \u2502  - ChatMessage    \u2502 \u2502\n\u2502  \u2502  - /health     \u2502  - lazy init     \u2502  - GenerateRequest\u2502 \u2502\n\u2502  \u2502  - /api/*      \u2502                  \u2502                   \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502 Python API\n                         \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    vLLM Inference Engine                    \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502  AsyncLLMEngine\u2502 SamplingParams   \u2502  Model Cache      \u2502 \u2502\n\u2502  \u2502  - generate()  \u2502  - temperature   \u2502  - HuggingFace    \u2502 \u2502\n\u2502  \u2502  - streaming   \u2502  - top_p         \u2502  - tokenizer      \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502 Model Inference\n                         \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  LLM Model (Qwen3-4B)                       \u2502\n\u2502             Loaded from HuggingFace Hub                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/overview/#system-components","title":"System Components","text":""},{"location":"architecture/overview/#frontend-layer","title":"Frontend Layer","text":"<p>Technology: React 18.3+ with Vite build tool</p> <p>Responsibilities: - User interface and interaction - Persona selection and management - Real-time streaming display - Chat history management</p> <p>Key Files: - <code>src/frontend/src/App.jsx</code> - Main application component - <code>src/frontend/src/hooks/useChat.js</code> - Chat state management - <code>src/frontend/src/api/client.js</code> - API communication - <code>src/frontend/src/config/personas.js</code> - Persona configurations</p>"},{"location":"architecture/overview/#backend-layer","title":"Backend Layer","text":"<p>Technology: FastAPI (async Python) with Uvicorn server</p> <p>Responsibilities: - HTTP API endpoints - Request validation - LLM engine management - Streaming response generation - CORS handling</p> <p>Key Files: - <code>src/backend/app/main.py</code> - FastAPI application and endpoints - <code>src/backend/app/__init__.py</code> - Module initialization</p>"},{"location":"architecture/overview/#inference-layer","title":"Inference Layer","text":"<p>Technology: vLLM (optimized LLM inference)</p> <p>Responsibilities: - Model loading and caching - Efficient GPU utilization - Token generation - Sampling strategy execution</p>"},{"location":"architecture/overview/#data-flow","title":"Data Flow","text":""},{"location":"architecture/overview/#request-flow","title":"Request Flow","text":"<ol> <li>User Input \u2192 User enters a requirement prompt</li> <li>Frontend Processing \u2192 useChat hook prepares request with persona context</li> <li>API Request \u2192 POST to <code>/api/generate</code> with messages and parameters</li> <li>Backend Validation \u2192 Pydantic validates request payload</li> <li>Prompt Formatting \u2192 Convert chat messages to model prompt</li> <li>LLM Inference \u2192 vLLM generates tokens asynchronously</li> <li>Streaming Response \u2192 Tokens streamed back as NDJSON</li> <li>Frontend Display \u2192 Real-time token accumulation and display</li> </ol>"},{"location":"architecture/overview/#streaming-protocol","title":"Streaming Protocol","text":"<p>The backend uses NDJSON (Newline Delimited JSON) for streaming:</p> <pre><code>{\"type\": \"token\", \"delta\": \"REQ\", \"content\": \"REQ\", \"request_id\": \"abc123\"}\n{\"type\": \"token\", \"delta\": \"-DEV\", \"content\": \"REQ-DEV\", \"request_id\": \"abc123\"}\n{\"type\": \"token\", \"delta\": \"-001\", \"content\": \"REQ-DEV-001\", \"request_id\": \"abc123\"}\n...\n{\"type\": \"done\", \"content\": \"REQ-DEV-001...\", \"finish_reason\": \"stop\", \"request_id\": \"abc123\"}\n</code></pre>"},{"location":"architecture/overview/#multi-agent-architecture-planned","title":"Multi-Agent Architecture (Planned)","text":"<p>The current implementation supports single-agent (persona) interactions. The future multi-agent system will include:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Orchestrator Agent                        \u2502\n\u2502     Coordinates multi-persona requirement synthesis          \u2502\n\u2514\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n    \u2502         \u2502          \u2502          \u2502          \u2502\n    \u2193         \u2193          \u2193          \u2193          \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502Developer\u2502Product\u2502 Customer \u2502 Sales  \u2502 Shareholder    \u2502\n\u2502 Agent   \u2502Manager\u2502  Agent   \u2502 Agent  \u2502 Agent          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n    \u2502         \u2502          \u2502          \u2502          \u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n                         \u2193\n              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n              \u2502  Conflict Detector   \u2502\n              \u2502  &amp; Synthesizer       \u2502\n              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n                         \u2193\n              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n              \u2502  Unified Requirements\u2502\n              \u2502  Document (IEEE      \u2502\n              \u2502  29148 Compliant)    \u2502\n              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/overview/#design-patterns","title":"Design Patterns","text":""},{"location":"architecture/overview/#backend-patterns","title":"Backend Patterns","text":"<p>Singleton Pattern - EngineManager ensures only one vLLM engine instance <pre><code>class EngineManager:\n    def __init__(self):\n        self._engine = None\n        self._lock = asyncio.Lock()\n</code></pre></p> <p>Dependency Injection - FastAPI's dependency system for request handling</p> <p>Async/Await - Non-blocking I/O for concurrent request handling</p>"},{"location":"architecture/overview/#frontend-patterns","title":"Frontend Patterns","text":"<p>Custom Hooks - React hooks for reusable logic (useChat)</p> <p>Component Composition - Modular, reusable UI components</p> <p>State Management - Local state with useState for simplicity</p>"},{"location":"architecture/overview/#security-architecture","title":"Security Architecture","text":""},{"location":"architecture/overview/#current-security-measures","title":"Current Security Measures","text":"<ol> <li>CORS Protection: Configured allowed origins</li> <li>Request Validation: Pydantic models validate all inputs</li> <li>Error Handling: Graceful degradation with proper error responses</li> <li>Rate Limiting: Planned for production</li> </ol>"},{"location":"architecture/overview/#future-security-enhancements","title":"Future Security Enhancements","text":"<ul> <li>API key authentication</li> <li>Rate limiting per user/IP</li> <li>Request signing</li> <li>Input sanitization for prompt injection attacks</li> </ul>"},{"location":"architecture/overview/#scalability-considerations","title":"Scalability Considerations","text":""},{"location":"architecture/overview/#current-limitations","title":"Current Limitations","text":"<ul> <li>Single vLLM engine instance</li> <li>In-memory state (no persistence)</li> <li>No load balancing</li> <li>No caching layer</li> </ul>"},{"location":"architecture/overview/#scaling-strategy","title":"Scaling Strategy","text":"<p>Horizontal Scaling: - Multiple backend replicas behind load balancer - Shared model cache (Redis) - Session persistence (database)</p> <p>Vertical Scaling: - Multi-GPU support (tensor parallelism) - Larger models for better quality - Increased memory for longer contexts</p> <p>Caching: - Response caching for common requirements - Model output caching (vLLM prefix caching)</p>"},{"location":"architecture/overview/#technology-choices","title":"Technology Choices","text":"Component Technology Rationale Backend Framework FastAPI Async support, automatic docs, Pydantic validation Frontend Framework React Component model, large ecosystem, great DX Build Tool Vite Fast HMR, modern ESM support LLM Inference vLLM Optimized GPU utilization, PagedAttention Model Qwen3-4B Good balance of quality and performance Server Uvicorn ASGI server, high performance"},{"location":"architecture/overview/#next-steps","title":"Next Steps","text":"<ul> <li>Backend Architecture - Deep dive into backend design</li> <li>Frontend Architecture - Frontend patterns and structure</li> <li>Multi-Agent System - Planned multi-agent architecture</li> <li>API Reference - Complete API documentation</li> </ul>"},{"location":"development/contributing/","title":"Contributing to MARC","text":"<p>Thank you for your interest in contributing to MARC! This guide will help you get started.</p>"},{"location":"development/contributing/#getting-started","title":"Getting Started","text":""},{"location":"development/contributing/#1-fork-and-clone","title":"1. Fork and Clone","text":"<pre><code># Fork on GitHub, then clone your fork\ngit clone https://github.com/YOUR_USERNAME/SEproj1a1.git\ncd SEproj1a1\n\n# Add upstream remote\ngit remote add upstream https://github.com/original/SEproj1a1.git\n</code></pre>"},{"location":"development/contributing/#2-set-up-development-environment","title":"2. Set Up Development Environment","text":"<pre><code># Backend\ncd src/backend\npython -m venv .venv\nsource .venv/bin/activate  # Windows: .venv\\Scripts\\activate\npip install -r requirements.txt\npip install -r ../../tests/requirements.txt  # Test dependencies\n\n# Frontend\ncd ../frontend\nnpm install\n</code></pre>"},{"location":"development/contributing/#3-create-a-branch","title":"3. Create a Branch","text":"<pre><code>git checkout -b feature/your-feature-name\n# or\ngit checkout -b fix/your-bug-fix\n</code></pre>"},{"location":"development/contributing/#development-workflow","title":"Development Workflow","text":""},{"location":"development/contributing/#1-make-your-changes","title":"1. Make Your Changes","text":"<ul> <li>Write clean, readable code</li> <li>Follow existing code style</li> <li>Add comments for complex logic</li> <li>Update documentation as needed</li> </ul>"},{"location":"development/contributing/#2-write-tests","title":"2. Write Tests","text":"<pre><code># Add tests for new features\ntouch tests/backend/test_your_feature.py\n\n# Run tests\npytest\n</code></pre>"},{"location":"development/contributing/#3-run-linters","title":"3. Run Linters","text":"<pre><code># Python (backend)\nblack src/backend\nflake8 src/backend\n\n# JavaScript (frontend)\ncd src/frontend\nnpm run lint\n</code></pre>"},{"location":"development/contributing/#4-test-locally","title":"4. Test Locally","text":"<pre><code># Start backend\ncd src/backend\nuvicorn app.main:app --reload\n\n# Start frontend (new terminal)\ncd src/frontend\nnpm run dev\n\n# Run tests\npytest --cov=src\n</code></pre>"},{"location":"development/contributing/#5-commit-changes","title":"5. Commit Changes","text":"<pre><code># Stage changes\ngit add .\n\n# Commit with clear message\ngit commit -m \"feat: Add multi-agent orchestration\"\n# or\ngit commit -m \"fix: Resolve streaming timeout issue\"\n</code></pre> <p>Commit Message Format: - <code>feat:</code> New feature - <code>fix:</code> Bug fix - <code>docs:</code> Documentation changes - <code>test:</code> Test additions/changes - <code>refactor:</code> Code refactoring - <code>style:</code> Code style changes - <code>chore:</code> Build/config changes</p>"},{"location":"development/contributing/#6-push-and-create-pr","title":"6. Push and Create PR","text":"<pre><code># Push to your fork\ngit push origin feature/your-feature-name\n\n# Create Pull Request on GitHub\n</code></pre>"},{"location":"development/contributing/#pull-request-guidelines","title":"Pull Request Guidelines","text":""},{"location":"development/contributing/#pr-checklist","title":"PR Checklist","text":"<ul> <li>[ ] Code follows project style guide</li> <li>[ ] All tests pass (<code>pytest</code>)</li> <li>[ ] New features have tests</li> <li>[ ] Documentation updated</li> <li>[ ] Commit messages are clear</li> <li>[ ] PR description explains changes</li> <li>[ ] No merge conflicts</li> </ul>"},{"location":"development/contributing/#pr-template","title":"PR Template","text":"<pre><code>## Description\nBrief description of changes\n\n## Type of Change\n- [ ] Bug fix\n- [ ] New feature\n- [ ] Breaking change\n- [ ] Documentation update\n\n## Testing\n- [ ] All existing tests pass\n- [ ] Added tests for new features\n- [ ] Manually tested changes\n\n## Screenshots (if applicable)\nAdd screenshots for UI changes\n</code></pre>"},{"location":"development/contributing/#code-style-guidelines","title":"Code Style Guidelines","text":""},{"location":"development/contributing/#python-backend","title":"Python (Backend)","text":"<p>Style: PEP 8 + Black formatting</p> <pre><code># Good\ndef format_chat_prompt(messages: List[ChatMessage]) -&gt; str:\n    \"\"\"Convert structured chat messages into plain-text prompt.\n\n    Args:\n        messages: List of ChatMessage objects\n\n    Returns:\n        Formatted prompt string\n\n    Raises:\n        ValueError: If messages list is empty\n    \"\"\"\n    if not messages:\n        raise ValueError(\"At least one message is required.\")\n\n    # Implementation...\n</code></pre> <p>Key Points: - Type hints for all function parameters and returns - Docstrings for all public functions (Google style) - Use <code>async/await</code> for async functions - Maximum line length: 88 characters (Black default)</p>"},{"location":"development/contributing/#javascript-frontend","title":"JavaScript (Frontend)","text":"<p>Style: ESLint + Prettier</p> <pre><code>// Good\nexport function ChatWindow({ messages }) {\n  const containerRef = useRef(null);\n\n  useEffect(() =&gt; {\n    // Auto-scroll to bottom\n    if (containerRef.current) {\n      containerRef.current.scrollTop = containerRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  return (\n    &lt;div ref={containerRef} className=\"chat-window\"&gt;\n      {messages.map((msg, idx) =&gt; (\n        &lt;Message key={idx} role={msg.role} content={msg.content} /&gt;\n      ))}\n    &lt;/div&gt;\n  );\n}\n</code></pre> <p>Key Points: - Functional components with hooks - PropTypes or TypeScript types - Destructure props - Use <code>const</code> over <code>let</code></p>"},{"location":"development/contributing/#testing-guidelines","title":"Testing Guidelines","text":""},{"location":"development/contributing/#writing-tests","title":"Writing Tests","text":"<p>Backend Tests: <pre><code>import pytest\nfrom fastapi.testclient import TestClient\n\ndef test_health_endpoint(client):\n    \"\"\"Test health check returns OK status.\"\"\"\n    response = client.get(\"/health\")\n\n    assert response.status_code == 200\n    assert response.json()[\"status\"] == \"ok\"\n</code></pre></p> <p>Frontend Tests (if adding): <pre><code>import { render, screen } from '@testing-library/react';\nimport { ChatWindow } from './ChatWindow';\n\ntest('renders messages', () =&gt; {\n  const messages = [\n    { role: 'user', content: 'Hello' }\n  ];\n\n  render(&lt;ChatWindow messages={messages} /&gt;);\n\n  expect(screen.getByText('Hello')).toBeInTheDocument();\n});\n</code></pre></p>"},{"location":"development/contributing/#test-coverage","title":"Test Coverage","text":"<ul> <li>Maintain 80%+ code coverage</li> <li>Test happy paths and edge cases</li> <li>Test error handling</li> <li>Mock external dependencies</li> </ul>"},{"location":"development/contributing/#documentation-guidelines","title":"Documentation Guidelines","text":""},{"location":"development/contributing/#code-documentation","title":"Code Documentation","text":"<pre><code>def complex_function(param1: str, param2: int) -&gt; Dict[str, Any]:\n    \"\"\"Brief one-line description.\n\n    More detailed description if needed. Explain the purpose,\n    not just what the code does.\n\n    Args:\n        param1: Description of param1\n        param2: Description of param2\n\n    Returns:\n        Description of return value\n\n    Raises:\n        ValueError: When param1 is invalid\n        HTTPException: When API call fails\n\n    Example:\n        &gt;&gt;&gt; result = complex_function(\"test\", 42)\n        &gt;&gt;&gt; print(result[\"status\"])\n        \"success\"\n    \"\"\"\n    # Implementation...\n</code></pre>"},{"location":"development/contributing/#readme-updates","title":"README Updates","text":"<p>When adding features, update: - <code>README.md</code> - If it affects quick start or features - <code>docs/</code> - Add detailed documentation - <code>TESTING.md</code> - If adding test categories</p>"},{"location":"development/contributing/#areas-to-contribute","title":"Areas to Contribute","text":""},{"location":"development/contributing/#high-priority","title":"High Priority","text":"<ol> <li>Multi-Agent Orchestration</li> <li>Implement orchestrator agent</li> <li>Parallel persona execution</li> <li> <p>Conflict detection</p> </li> <li> <p>Frontend Enhancements</p> </li> <li>Requirement export (PDF, Markdown)</li> <li>Side-by-side persona comparison</li> <li> <p>History/search functionality</p> </li> <li> <p>Testing</p> </li> <li>Increase coverage to 90%+</li> <li>Add frontend tests</li> <li> <p>Performance tests</p> </li> <li> <p>Documentation</p> </li> <li>Tutorial videos</li> <li>More code examples</li> <li>Architecture diagrams</li> </ol>"},{"location":"development/contributing/#medium-priority","title":"Medium Priority","text":"<ol> <li>RAG Integration</li> <li>Vector database for requirements</li> <li>Similarity search</li> <li> <p>Learning from past requirements</p> </li> <li> <p>API Enhancements</p> </li> <li>Authentication/API keys</li> <li>Rate limiting</li> <li> <p>WebSocket support</p> </li> <li> <p>UI/UX Improvements</p> </li> <li>Dark mode</li> <li>Keyboard shortcuts</li> <li>Mobile optimization</li> </ol>"},{"location":"development/contributing/#good-first-issues","title":"Good First Issues","text":"<p>Look for issues labeled <code>good-first-issue</code>: - Documentation improvements - Test additions - Small bug fixes - Code formatting</p>"},{"location":"development/contributing/#getting-help","title":"Getting Help","text":""},{"location":"development/contributing/#communication","title":"Communication","text":"<ul> <li>GitHub Issues: Bug reports and feature requests</li> <li>GitHub Discussions: Questions and ideas</li> <li>Pull Requests: Code review and feedback</li> </ul>"},{"location":"development/contributing/#resources","title":"Resources","text":"<ul> <li>Architecture Documentation</li> <li>API Reference</li> <li>Testing Guide</li> <li>Code Standards</li> </ul>"},{"location":"development/contributing/#code-review-process","title":"Code Review Process","text":""},{"location":"development/contributing/#what-reviewers-look-for","title":"What Reviewers Look For","text":"<ol> <li>Correctness: Does it work as intended?</li> <li>Tests: Are there adequate tests?</li> <li>Style: Does it follow code standards?</li> <li>Documentation: Is it well-documented?</li> <li>Performance: Any performance concerns?</li> <li>Security: Any security issues?</li> </ol>"},{"location":"development/contributing/#responding-to-feedback","title":"Responding to Feedback","text":"<ul> <li>Be open to feedback</li> <li>Ask questions if unclear</li> <li>Make requested changes</li> <li>Update PR description if scope changes</li> <li>Request re-review after changes</li> </ul>"},{"location":"development/contributing/#license","title":"License","text":"<p>By contributing, you agree that your contributions will be licensed under the MIT License.</p>"},{"location":"development/contributing/#recognition","title":"Recognition","text":"<p>Contributors will be: - Listed in CONTRIBUTORS.md - Credited in release notes - Acknowledged in documentation</p> <p>Thank you for contributing to MARC!</p>"},{"location":"development/standards/","title":"Code Standards","text":"<p>Coding standards and conventions for MARC development.</p>"},{"location":"development/standards/#general-principles","title":"General Principles","text":"<ol> <li>Readability First: Code is read more often than written</li> <li>Consistency: Follow existing patterns</li> <li>Simplicity: Choose the simplest solution that works</li> <li>Documentation: Document why, not what</li> <li>Testing: Write tests for all new code</li> </ol>"},{"location":"development/standards/#python-standards-backend","title":"Python Standards (Backend)","text":""},{"location":"development/standards/#style-guide","title":"Style Guide","text":"<p>Follow PEP 8 with Black formatting:</p> <pre><code># Format code\nblack src/backend\n\n# Check style\nflake8 src/backend\n</code></pre>"},{"location":"development/standards/#naming-conventions","title":"Naming Conventions","text":"<pre><code># Variables and functions: snake_case\nuser_count = 10\ndef calculate_total(items):\n    pass\n\n# Classes: PascalCase\nclass UserManager:\n    pass\n\n# Constants: UPPER_SNAKE_CASE\nMAX_RETRIES = 3\nDEFAULT_TIMEOUT = 30\n\n# Private: leading underscore\ndef _internal_helper():\n    pass\n\n# Protected: single underscore\nclass MyClass:\n    def _protected_method(self):\n        pass\n</code></pre>"},{"location":"development/standards/#type-hints","title":"Type Hints","text":"<p>Always use type hints:</p> <pre><code>from typing import List, Dict, Optional, Union\n\ndef process_messages(\n    messages: List[ChatMessage],\n    max_tokens: int = 512,\n    temperature: float = 0.7\n) -&gt; Dict[str, Any]:\n    \"\"\"Process chat messages.\"\"\"\n    pass\n\n# Optional for nullable values\ndef get_user(user_id: str) -&gt; Optional[User]:\n    \"\"\"Get user by ID, returns None if not found.\"\"\"\n    pass\n\n# Union for multiple types\ndef parse_input(data: Union[str, dict]) -&gt; dict:\n    \"\"\"Parse input from string or dict.\"\"\"\n    pass\n</code></pre>"},{"location":"development/standards/#docstrings","title":"Docstrings","text":"<p>Use Google Style docstrings:</p> <pre><code>def generate_requirement(\n    persona: str,\n    prompt: str,\n    max_tokens: int = 512\n) -&gt; str:\n    \"\"\"Generate a requirement from persona and prompt.\n\n    This function uses the specified persona's system prompt\n    to generate an IEEE 29148-compliant requirement.\n\n    Args:\n        persona: The persona key (developer, product_manager, etc.)\n        prompt: User's requirement description\n        max_tokens: Maximum tokens to generate (default: 512)\n\n    Returns:\n        Generated requirement text in IEEE 29148 format\n\n    Raises:\n        ValueError: If persona is invalid\n        RuntimeError: If LLM engine is not available\n\n    Example:\n        &gt;&gt;&gt; req = generate_requirement(\"developer\", \"Build auth\")\n        &gt;&gt;&gt; print(req[:20])\n        \"REQ-DEV-001: User...\"\n    \"\"\"\n    pass\n</code></pre>"},{"location":"development/standards/#code-organization","title":"Code Organization","text":"<pre><code>\"\"\"Module for chat message handling.\n\nThis module provides classes and functions for processing\nchat messages in the MARC system.\n\"\"\"\n\n# Standard library imports\nimport asyncio\nimport logging\nfrom typing import List, Optional\n\n# Third-party imports\nfrom fastapi import FastAPI, HTTPException\nfrom pydantic import BaseModel\n\n# Local imports\nfrom app.config import settings\nfrom app.utils import format_prompt\n\n# Module-level constants\nLOGGER = logging.getLogger(__name__)\nMAX_RETRIES = 3\n\n# Classes\nclass ChatMessage(BaseModel):\n    \"\"\"Represents a single chat message.\"\"\"\n    pass\n\n# Functions\ndef process_messages(messages: List[ChatMessage]) -&gt; str:\n    \"\"\"Process chat messages into prompt.\"\"\"\n    pass\n</code></pre>"},{"location":"development/standards/#error-handling","title":"Error Handling","text":"<pre><code># Specific exceptions\ntry:\n    result = risky_operation()\nexcept ValueError as e:\n    logger.error(f\"Invalid value: {e}\")\n    raise HTTPException(status_code=400, detail=str(e))\nexcept Exception as e:\n    logger.exception(\"Unexpected error\")\n    raise HTTPException(status_code=500, detail=\"Internal server error\")\n\n# Don't catch Exception unless necessary\n# Don't use bare except:\n</code></pre>"},{"location":"development/standards/#asyncawait","title":"Async/Await","text":"<pre><code># Use async for I/O-bound operations\nasync def fetch_data(url: str) -&gt; dict:\n    \"\"\"Fetch data from URL asynchronously.\"\"\"\n    async with httpx.AsyncClient() as client:\n        response = await client.get(url)\n        return response.json()\n\n# Use await for async function calls\nresult = await fetch_data(\"http://example.com\")\n\n# Use asyncio.gather for parallel operations\nresults = await asyncio.gather(\n    fetch_data(url1),\n    fetch_data(url2),\n    fetch_data(url3)\n)\n</code></pre>"},{"location":"development/standards/#javascript-standards-frontend","title":"JavaScript Standards (Frontend)","text":""},{"location":"development/standards/#style-guide_1","title":"Style Guide","text":"<p>Use ESLint with Prettier:</p> <pre><code># Check lint\nnpm run lint\n\n# Fix automatically\nnpm run lint:fix\n\n# Format with Prettier\nnpm run format\n</code></pre>"},{"location":"development/standards/#naming-conventions_1","title":"Naming Conventions","text":"<pre><code>// Variables and functions: camelCase\nconst userCount = 10;\nfunction calculateTotal(items) {}\n\n// Components: PascalCase\nfunction ChatWindow({ messages }) {}\n\n// Constants: UPPER_SNAKE_CASE\nconst MAX_RETRIES = 3;\nconst API_BASE_URL = \"http://localhost:8001\";\n\n// Private: leading underscore (convention)\nfunction _internalHelper() {}\n\n// Boolean: is/has prefix\nconst isLoading = true;\nconst hasError = false;\n</code></pre>"},{"location":"development/standards/#component-structure","title":"Component Structure","text":"<pre><code>import { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * ChatWindow displays the chat message history.\n *\n * @param {Object} props - Component props\n * @param {Array} props.messages - Array of message objects\n * @returns {JSX.Element} The rendered component\n */\nexport function ChatWindow({ messages }) {\n  // Hooks at the top\n  const [isScrolled, setIsScrolled] = useState(false);\n  const containerRef = useRef(null);\n\n  // Effects\n  useEffect(() =&gt; {\n    // Auto-scroll logic\n  }, [messages]);\n\n  // Event handlers\n  const handleScroll = () =&gt; {\n    setIsScrolled(true);\n  };\n\n  // Render helpers (if needed)\n  const renderMessage = (msg, idx) =&gt; (\n    &lt;div key={idx} className={`message ${msg.role}`}&gt;\n      {msg.content}\n    &lt;/div&gt;\n  );\n\n  // Return JSX\n  return (\n    &lt;div ref={containerRef} onScroll={handleScroll}&gt;\n      {messages.map(renderMessage)}\n    &lt;/div&gt;\n  );\n}\n\n// PropTypes\nChatWindow.propTypes = {\n  messages: PropTypes.arrayOf(\n    PropTypes.shape({\n      role: PropTypes.oneOf(['user', 'assistant']).isRequired,\n      content: PropTypes.string.isRequired\n    })\n  ).isRequired\n};\n</code></pre>"},{"location":"development/standards/#hooks-best-practices","title":"Hooks Best Practices","text":"<pre><code>// Custom hooks start with \"use\"\nfunction useChat(personaKey) {\n  const [messages, setMessages] = useState([]);\n  const [status, setStatus] = useState('idle');\n\n  // Logic...\n\n  return { messages, status };\n}\n\n// Dependencies array\nuseEffect(() =&gt; {\n  // Effect code\n}, [dependency1, dependency2]); // Only re-run if these change\n\n// Cleanup\nuseEffect(() =&gt; {\n  const subscription = subscribe();\n\n  return () =&gt; {\n    subscription.unsubscribe();\n  };\n}, []);\n</code></pre>"},{"location":"development/standards/#comments","title":"Comments","text":"<pre><code>// Good: Explain WHY\n// Debounce to avoid too many API calls\nconst debouncedSend = debounce(sendMessage, 300);\n\n// Bad: Explain WHAT (code is self-explanatory)\n// Set messages to empty array\nsetMessages([]);\n\n// JSDoc for functions\n/**\n * Stream generation from API.\n *\n * @param {Object} payload - Request payload\n * @param {Function} onChunk - Callback for each token\n * @param {AbortSignal} signal - Abort signal for cancellation\n * @returns {Promise&lt;void&gt;}\n * @throws {Error} If request fails\n */\nasync function streamGenerate(payload, onChunk, signal) {\n  // Implementation...\n}\n</code></pre>"},{"location":"development/standards/#file-naming","title":"File Naming","text":""},{"location":"development/standards/#python-files","title":"Python Files","text":"<ul> <li>Modules: <code>snake_case.py</code></li> <li>Tests: <code>test_&lt;module&gt;.py</code></li> <li>Example: <code>chat_handler.py</code>, <code>test_chat_handler.py</code></li> </ul>"},{"location":"development/standards/#javascript-files","title":"JavaScript Files","text":"<ul> <li>Components: <code>PascalCase.jsx</code></li> <li>Hooks: <code>camelCase.js</code> (with <code>use</code> prefix)</li> <li>Utilities: <code>camelCase.js</code></li> <li>Example: <code>ChatWindow.jsx</code>, <code>useChat.js</code>, <code>apiClient.js</code></li> </ul>"},{"location":"development/standards/#git-commit-messages","title":"Git Commit Messages","text":""},{"location":"development/standards/#format","title":"Format","text":"<pre><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;\n\n&lt;body&gt;\n\n&lt;footer&gt;\n</code></pre>"},{"location":"development/standards/#types","title":"Types","text":"<ul> <li><code>feat</code>: New feature</li> <li><code>fix</code>: Bug fix</li> <li><code>docs</code>: Documentation changes</li> <li><code>style</code>: Code style changes (formatting, etc.)</li> <li><code>refactor</code>: Code refactoring</li> <li><code>test</code>: Test additions/changes</li> <li><code>chore</code>: Build, config, dependencies</li> </ul>"},{"location":"development/standards/#examples","title":"Examples","text":"<pre><code># Good\ngit commit -m \"feat(backend): Add multi-agent orchestration\"\ngit commit -m \"fix(frontend): Resolve streaming timeout issue\"\ngit commit -m \"docs(api): Update REST API documentation\"\n\n# With body\ngit commit -m \"feat(personas): Add shareholder persona\n\n- Add shareholder persona configuration\n- Update persona selection UI\n- Add tests for shareholder requirements\n\nCloses #42\"\n</code></pre>"},{"location":"development/standards/#code-review-checklist","title":"Code Review Checklist","text":""},{"location":"development/standards/#before-submitting-pr","title":"Before Submitting PR","text":"<ul> <li>[ ] Code follows style guide</li> <li>[ ] All tests pass</li> <li>[ ] New features have tests</li> <li>[ ] Documentation updated</li> <li>[ ] No console.log or debug prints</li> <li>[ ] No commented-out code</li> <li>[ ] Meaningful variable names</li> <li>[ ] Error handling added</li> <li>[ ] Type hints/PropTypes present</li> </ul>"},{"location":"development/standards/#during-review","title":"During Review","text":"<p>Reviewers should check:</p> <ol> <li>Correctness: Does it work as intended?</li> <li>Style: Follows code standards?</li> <li>Tests: Adequate test coverage?</li> <li>Documentation: Well-documented?</li> <li>Performance: Any concerns?</li> <li>Security: Any vulnerabilities?</li> <li>Maintainability: Easy to understand and modify?</li> </ol>"},{"location":"development/standards/#project-structure-standards","title":"Project Structure Standards","text":""},{"location":"development/standards/#backend-structure","title":"Backend Structure","text":"<pre><code>src/backend/\n\u251c\u2500\u2500 app/\n\u2502   \u251c\u2500\u2500 __init__.py       # Package initialization\n\u2502   \u251c\u2500\u2500 main.py           # FastAPI app and endpoints\n\u2502   \u251c\u2500\u2500 models/           # Pydantic models (if growing)\n\u2502   \u251c\u2500\u2500 services/         # Business logic (if needed)\n\u2502   \u251c\u2500\u2500 utils/            # Utility functions\n\u2502   \u2514\u2500\u2500 config.py         # Configuration\n\u2514\u2500\u2500 requirements.txt      # Dependencies\n</code></pre>"},{"location":"development/standards/#frontend-structure","title":"Frontend Structure","text":"<pre><code>src/frontend/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 components/       # React components\n\u2502   \u251c\u2500\u2500 hooks/            # Custom hooks\n\u2502   \u251c\u2500\u2500 api/              # API clients\n\u2502   \u251c\u2500\u2500 config/           # Configuration\n\u2502   \u251c\u2500\u2500 utils/            # Utility functions\n\u2502   \u251c\u2500\u2500 styles/           # CSS files (if separate)\n\u2502   \u251c\u2500\u2500 App.jsx           # Root component\n\u2502   \u2514\u2500\u2500 main.jsx          # Entry point\n\u251c\u2500\u2500 public/               # Static assets\n\u2514\u2500\u2500 package.json          # Dependencies\n</code></pre>"},{"location":"development/standards/#documentation-standards","title":"Documentation Standards","text":""},{"location":"development/standards/#readme-structure","title":"README Structure","text":"<ol> <li>Title and badges</li> <li>Overview: What is it?</li> <li>Features: Key capabilities</li> <li>Quick Start: Get running fast</li> <li>Installation: Detailed setup</li> <li>Usage: How to use</li> <li>Testing: How to test</li> <li>Contributing: How to contribute</li> <li>License: License info</li> </ol>"},{"location":"development/standards/#code-comments","title":"Code Comments","text":"<pre><code># Good: Explain non-obvious decisions\n# Use exponential backoff to avoid rate limiting\nawait asyncio.sleep(2 ** retry_count)\n\n# Bad: Redundant comments\n# Increment counter\ncounter += 1\n</code></pre>"},{"location":"development/standards/#api-documentation","title":"API Documentation","text":"<p>Use OpenAPI/Swagger for REST APIs (automatically generated by FastAPI).</p> <p>For additional docs: - Endpoint purpose - Request/response examples - Error codes - Rate limits - Authentication requirements</p>"},{"location":"development/standards/#performance-guidelines","title":"Performance Guidelines","text":""},{"location":"development/standards/#backend","title":"Backend","text":"<ul> <li>Use async/await for I/O operations</li> <li>Implement connection pooling</li> <li>Cache frequently accessed data</li> <li>Use pagination for large datasets</li> <li>Profile before optimizing</li> </ul>"},{"location":"development/standards/#frontend","title":"Frontend","text":"<ul> <li>Lazy load components</li> <li>Memoize expensive computations</li> <li>Debounce user input</li> <li>Optimize re-renders</li> <li>Bundle size optimization</li> </ul>"},{"location":"development/standards/#security-guidelines","title":"Security Guidelines","text":"<ul> <li>Never commit secrets/keys</li> <li>Validate all user input</li> <li>Use parameterized queries</li> <li>Implement rate limiting</li> <li>Keep dependencies updated</li> <li>Use HTTPS in production</li> <li>Sanitize error messages (don't leak internals)</li> </ul>"},{"location":"development/standards/#next-steps","title":"Next Steps","text":"<ul> <li>Contributing Guide - How to contribute</li> <li>Testing Guide - Testing standards</li> <li>Architecture - System design</li> </ul>"},{"location":"development/testing/","title":"Development Testing Guide","text":"<p>Comprehensive testing guide for MARC developers.</p>"},{"location":"development/testing/#test-philosophy","title":"Test Philosophy","text":"<p>MARC follows a test-driven development (TDD) approach where possible:</p> <ol> <li>Write failing test</li> <li>Write minimal code to pass test</li> <li>Refactor while keeping tests green</li> </ol>"},{"location":"development/testing/#test-pyramid","title":"Test Pyramid","text":"<pre><code>       /\\\n      /  \\     E2E Tests (Few)\n     /\u2500\u2500\u2500\u2500\\\n    /      \\   Integration Tests (Some)\n   /\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\\\n  /          \\ Unit Tests (Many)\n /\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\\\n</code></pre> <ul> <li>Unit Tests: Fast, isolated, many</li> <li>Integration Tests: Moderate speed, test interactions</li> <li>E2E Tests: Slow, test full workflows (future)</li> </ul>"},{"location":"development/testing/#test-structure","title":"Test Structure","text":"<pre><code>tests/\n\u251c\u2500\u2500 backend/              # Backend tests\n\u2502   \u251c\u2500\u2500 test_api.py      # API endpoint tests\n\u2502   \u251c\u2500\u2500 test_models.py   # Pydantic model tests\n\u2502   \u2514\u2500\u2500 test_engine.py   # EngineManager tests\n\u251c\u2500\u2500 integration/          # Integration tests\n\u2502   \u251c\u2500\u2500 test_personas.py # Persona generation tests\n\u2502   \u251c\u2500\u2500 test_streaming.py # Streaming protocol tests\n\u2502   \u2514\u2500\u2500 test_multi_agent.py # Future multi-agent tests\n\u251c\u2500\u2500 requirements/         # Requirement validation\n\u2502   \u251c\u2500\u2500 test_extraction.py # Parsing tests\n\u2502   \u2514\u2500\u2500 test_ieee_compliance.py # Standards compliance\n\u251c\u2500\u2500 frontend/            # Frontend tests (future)\n\u2502   \u251c\u2500\u2500 test_components.py\n\u2502   \u2514\u2500\u2500 test_hooks.py\n\u251c\u2500\u2500 fixtures/            # Shared test data\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 sample_data.py\n\u251c\u2500\u2500 conftest.py          # Pytest configuration\n\u2514\u2500\u2500 requirements.txt     # Test dependencies\n</code></pre>"},{"location":"development/testing/#writing-unit-tests","title":"Writing Unit Tests","text":""},{"location":"development/testing/#backend-unit-test-example","title":"Backend Unit Test Example","text":"<pre><code># tests/backend/test_models.py\nimport pytest\nfrom pydantic import ValidationError\nfrom app.main import ChatMessage, GenerateRequest\n\nclass TestChatMessage:\n    \"\"\"Tests for ChatMessage model.\"\"\"\n\n    def test_valid_message(self):\n        \"\"\"Test creating valid message.\"\"\"\n        msg = ChatMessage(role=\"user\", content=\"Hello\")\n\n        assert msg.role == \"user\"\n        assert msg.content == \"Hello\"\n\n    def test_invalid_role(self):\n        \"\"\"Test invalid role raises error.\"\"\"\n        with pytest.raises(ValidationError) as exc_info:\n            ChatMessage(role=\"invalid\", content=\"Hello\")\n\n        assert \"role must be one of\" in str(exc_info.value)\n\n    @pytest.mark.parametrize(\"role\", [\"system\", \"user\", \"assistant\"])\n    def test_all_valid_roles(self, role):\n        \"\"\"Test all valid roles accepted.\"\"\"\n        msg = ChatMessage(role=role, content=\"Test\")\n        assert msg.role == role\n</code></pre>"},{"location":"development/testing/#frontend-unit-test-example","title":"Frontend Unit Test Example","text":"<pre><code>// tests/frontend/test_hooks.test.js\nimport { renderHook, act } from '@testing-library/react-hooks';\nimport { useChat } from '../../src/hooks/useChat';\n\ndescribe('useChat hook', () =&gt; {\n  it('initializes with empty messages', () =&gt; {\n    const { result } = renderHook(() =&gt; useChat('developer'));\n\n    expect(result.current.messages).toEqual([]);\n    expect(result.current.status).toBe('idle');\n  });\n\n  it('adds message when sendMessage called', async () =&gt; {\n    const { result } = renderHook(() =&gt; useChat('developer'));\n\n    await act(async () =&gt; {\n      await result.current.sendMessage('Hello');\n    });\n\n    expect(result.current.messages.length).toBeGreaterThan(0);\n    expect(result.current.messages[0].role).toBe('user');\n  });\n});\n</code></pre>"},{"location":"development/testing/#writing-integration-tests","title":"Writing Integration Tests","text":""},{"location":"development/testing/#api-integration-test","title":"API Integration Test","text":"<pre><code># tests/integration/test_api_flow.py\nimport pytest\nfrom fastapi.testclient import TestClient\nfrom app.main import app\n\n@pytest.fixture\ndef client():\n    \"\"\"Create test client.\"\"\"\n    return TestClient(app)\n\nclass TestAPIFlow:\n    \"\"\"Test complete API workflows.\"\"\"\n\n    def test_health_check_flow(self, client):\n        \"\"\"Test health endpoint returns expected data.\"\"\"\n        response = client.get(\"/health\")\n\n        assert response.status_code == 200\n        data = response.json()\n\n        assert \"status\" in data\n        assert \"model\" in data\n        assert \"engine_ready\" in data\n\n    def test_generate_non_streaming_flow(self, client):\n        \"\"\"Test complete non-streaming generation.\"\"\"\n        payload = {\n            \"messages\": [\n                {\"role\": \"user\", \"content\": \"Test requirement\"}\n            ],\n            \"stream\": False,\n            \"max_tokens\": 100\n        }\n\n        response = client.post(\"/generate\", json=payload)\n\n        assert response.status_code == 200\n        data = response.json()\n\n        assert \"output\" in data\n        assert \"request_id\" in data\n        assert len(data[\"output\"]) &gt; 0\n\n    @pytest.mark.asyncio\n    async def test_generate_streaming_flow(self, client):\n        \"\"\"Test complete streaming generation.\"\"\"\n        payload = {\n            \"messages\": [{\"role\": \"user\", \"content\": \"Test\"}],\n            \"stream\": True\n        }\n\n        with client.stream(\"POST\", \"/generate\", json=payload) as response:\n            assert response.status_code == 200\n\n            chunks = []\n            for line in response.iter_lines():\n                if line:\n                    data = json.loads(line)\n                    chunks.append(data)\n\n            # Verify we got tokens and done event\n            assert any(c[\"type\"] == \"token\" for c in chunks)\n            assert chunks[-1][\"type\"] == \"done\"\n</code></pre>"},{"location":"development/testing/#persona-integration-test","title":"Persona Integration Test","text":"<pre><code># tests/integration/test_personas.py\nimport pytest\n\n@pytest.mark.requires_llm\nclass TestPersonaGeneration:\n    \"\"\"Test persona-specific requirement generation.\"\"\"\n\n    def test_developer_persona(self, generate_requirement):\n        \"\"\"Developer generates technical requirements.\"\"\"\n        response = generate_requirement(\n            persona=\"developer\",\n            prompt=\"Build user authentication\"\n        )\n\n        # Developer should mention technical details\n        technical_keywords = [\n            \"security\", \"encryption\", \"bcrypt\", \"jwt\",\n            \"api\", \"database\", \"hash\"\n        ]\n\n        response_lower = response.lower()\n        assert any(kw in response_lower for kw in technical_keywords)\n\n    def test_product_manager_persona(self, generate_requirement):\n        \"\"\"Product Manager focuses on business value.\"\"\"\n        response = generate_requirement(\n            persona=\"product_manager\",\n            prompt=\"Build user authentication\"\n        )\n\n        # PM should mention business aspects\n        business_keywords = [\n            \"user\", \"value\", \"business\", \"metric\",\n            \"kpi\", \"success\", \"adoption\"\n        ]\n\n        response_lower = response.lower()\n        assert any(kw in response_lower for kw in business_keywords)\n</code></pre>"},{"location":"development/testing/#test-fixtures","title":"Test Fixtures","text":""},{"location":"development/testing/#conftestpy","title":"conftest.py","text":"<pre><code># tests/conftest.py\nimport pytest\nfrom fastapi.testclient import TestClient\nfrom app.main import app\n\n@pytest.fixture\ndef client():\n    \"\"\"Provide test client for API tests.\"\"\"\n    return TestClient(app)\n\n@pytest.fixture\ndef sample_messages():\n    \"\"\"Provide sample chat messages.\"\"\"\n    return [\n        {\"role\": \"system\", \"content\": \"You are a developer.\"},\n        {\"role\": \"user\", \"content\": \"Build authentication\"}\n    ]\n\n@pytest.fixture\ndef sample_requirement():\n    \"\"\"Provide sample requirement text.\"\"\"\n    return \"\"\"\n    REQ-DEV-001: User Authentication\n\n    Category: Security\n    Priority: High\n\n    Description: Implement secure authentication\n    Rationale: Protect user data\n    Acceptance Criteria:\n    - Password hashing with bcrypt\n    - JWT token generation\n    Dependencies: bcrypt, JWT library\n    Verification Method: Unit tests\n    \"\"\"\n\n@pytest.fixture\ndef generate_requirement():\n    \"\"\"Fixture for generating requirements in tests.\"\"\"\n    def _generate(persona: str, prompt: str) -&gt; str:\n        # Implementation depends on your setup\n        # Could call API or mock LLM\n        pass\n    return _generate\n</code></pre>"},{"location":"development/testing/#test-markers","title":"Test Markers","text":""},{"location":"development/testing/#custom-markers","title":"Custom Markers","text":"<pre><code># pytest.ini\n[pytest]\nmarkers =\n    unit: Unit tests (fast, no external dependencies)\n    integration: Integration tests (may require services)\n    requires_llm: Tests that need actual LLM (slow, expensive)\n    slow: Tests that take &gt; 5 seconds\n</code></pre>"},{"location":"development/testing/#using-markers","title":"Using Markers","text":"<pre><code>@pytest.mark.unit\ndef test_fast_function():\n    \"\"\"Fast unit test.\"\"\"\n    pass\n\n@pytest.mark.integration\ndef test_api_endpoint():\n    \"\"\"Integration test.\"\"\"\n    pass\n\n@pytest.mark.requires_llm\n@pytest.mark.slow\ndef test_full_generation():\n    \"\"\"Full LLM generation test.\"\"\"\n    pass\n</code></pre>"},{"location":"development/testing/#running-by-marker","title":"Running by Marker","text":"<pre><code># Run only unit tests\npytest -m unit\n\n# Run everything except slow tests\npytest -m \"not slow\"\n\n# Run integration but not LLM tests\npytest -m \"integration and not requires_llm\"\n</code></pre>"},{"location":"development/testing/#mocking","title":"Mocking","text":""},{"location":"development/testing/#mock-vllm-engine","title":"Mock vLLM Engine","text":"<pre><code># tests/fixtures/mock_engine.py\nfrom unittest.mock import Mock, AsyncMock\n\n@pytest.fixture\ndef mock_llm_engine():\n    \"\"\"Mock vLLM engine for testing without actual LLM.\"\"\"\n    engine = Mock()\n    engine.generate = AsyncMock()\n\n    async def generate_mock(*args, **kwargs):\n        # Yield mock request outputs\n        mock_output = Mock()\n        mock_output.outputs = [Mock(text=\"Mocked response\")]\n        yield mock_output\n\n    engine.generate.side_effect = generate_mock\n    return engine\n</code></pre>"},{"location":"development/testing/#mock-api-responses","title":"Mock API Responses","text":"<pre><code>import responses\n\n@responses.activate\ndef test_api_call():\n    \"\"\"Test with mocked HTTP responses.\"\"\"\n    responses.add(\n        responses.POST,\n        \"http://localhost:8001/generate\",\n        json={\"output\": \"Mocked\"},\n        status=200\n    )\n\n    # Your test code that calls the API\n</code></pre>"},{"location":"development/testing/#coverage","title":"Coverage","text":""},{"location":"development/testing/#measuring-coverage","title":"Measuring Coverage","text":"<pre><code># Run with coverage\npytest --cov=src --cov-report=html --cov-report=term\n\n# View HTML report\nopen htmlcov/index.html\n</code></pre>"},{"location":"development/testing/#coverage-configuration","title":"Coverage Configuration","text":"<pre><code># .coveragerc\n[run]\nsource = src\nomit =\n    */tests/*\n    */venv/*\n    */__pycache__/*\n\n[report]\nexclude_lines =\n    pragma: no cover\n    def __repr__\n    raise AssertionError\n    raise NotImplementedError\n    if __name__ == .__main__.:\n</code></pre>"},{"location":"development/testing/#coverage-goals","title":"Coverage Goals","text":"<ul> <li>Overall: 80%+</li> <li>Critical paths: 90%+</li> <li>New code: 100%</li> </ul>"},{"location":"development/testing/#performance-testing","title":"Performance Testing","text":""},{"location":"development/testing/#response-time-test","title":"Response Time Test","text":"<pre><code>import time\n\ndef test_generate_performance(client):\n    \"\"\"Test response time is acceptable.\"\"\"\n    start = time.time()\n\n    response = client.post(\"/generate\", json={\n        \"messages\": [{\"role\": \"user\", \"content\": \"Test\"}],\n        \"stream\": False\n    })\n\n    elapsed = time.time() - start\n\n    assert response.status_code == 200\n    assert elapsed &lt; 5.0  # Should respond within 5 seconds\n</code></pre>"},{"location":"development/testing/#load-testing-with-locust","title":"Load Testing with Locust","text":"<pre><code># locustfile.py\nfrom locust import HttpUser, task, between\n\nclass MARCUser(HttpUser):\n    wait_time = between(1, 3)\n\n    @task\n    def generate_requirement(self):\n        self.client.post(\"/generate\", json={\n            \"messages\": [\n                {\"role\": \"user\", \"content\": \"Build authentication\"}\n            ],\n            \"stream\": False\n        })\n</code></pre> <p>Run: <code>locust -f locustfile.py --host=http://localhost:8001</code></p>"},{"location":"development/testing/#cicd-integration","title":"CI/CD Integration","text":""},{"location":"development/testing/#github-actions","title":"GitHub Actions","text":"<pre><code># .github/workflows/tests.yml\nname: Tests\n\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    steps:\n    - uses: actions/checkout@v2\n\n    - name: Set up Python\n      uses: actions/setup-python@v2\n      with:\n        python-version: '3.10'\n\n    - name: Install dependencies\n      run: |\n        pip install -r src/backend/requirements.txt\n        pip install -r tests/requirements.txt\n\n    - name: Run tests\n      run: |\n        pytest --cov=src --cov-report=xml\n\n    - name: Upload coverage\n      uses: codecov/codecov-action@v2\n      with:\n        file: ./coverage.xml\n</code></pre>"},{"location":"development/testing/#best-practices","title":"Best Practices","text":"<ol> <li>Test Naming: <code>test_&lt;what&gt;_&lt;condition&gt;_&lt;expected&gt;</code></li> <li>\u2705 <code>test_generate_with_invalid_role_raises_error</code></li> <li> <p>\u274c <code>test_1</code></p> </li> <li> <p>One Assertion Per Test (when possible)</p> </li> <li> <p>Makes failures easier to diagnose</p> </li> <li> <p>Arrange-Act-Assert (AAA) Pattern <pre><code>def test_something():\n    # Arrange\n    data = setup_test_data()\n\n    # Act\n    result = function_under_test(data)\n\n    # Assert\n    assert result == expected\n</code></pre></p> </li> <li> <p>Don't Test Implementation Details</p> </li> <li> <p>Test behavior, not internal state</p> </li> <li> <p>Clean Up After Tests</p> </li> <li>Use fixtures with yield for cleanup</li> <li>Reset mocks between tests</li> </ol>"},{"location":"development/testing/#next-steps","title":"Next Steps","text":"<ul> <li>Code Standards - Coding conventions</li> <li>Contributing Guide - How to contribute</li> <li>Testing Guide - User-facing testing docs</li> </ul>"},{"location":"getting-started/configuration/","title":"Configuration Guide","text":"<p>This guide covers all configuration options for customizing MARC to your needs.</p>"},{"location":"getting-started/configuration/#backend-configuration","title":"Backend Configuration","text":"<p>The backend can be configured through environment variables or by editing <code>src/backend/app/main.py</code>.</p>"},{"location":"getting-started/configuration/#environment-variables","title":"Environment Variables","text":"<p>Create a <code>.env</code> file in <code>src/backend/</code>:</p> <pre><code># Model Configuration\nVLLM_MODEL=Qwen/Qwen3-4B\nVLLM_MAX_TOKENS=512\nVLLM_TEMPERATURE=0.7\nVLLM_TOP_P=0.95\nVLLM_MAX_MODEL_LEN=4096\nVLLM_TRUST_REMOTE_CODE=false\n\n# GPU Configuration\nVLLM_TENSOR_PARALLEL_SIZE=1\nGPU_MEMORY_UTILIZATION=0.9\n\n# Server Configuration\nBACKEND_ALLOW_ORIGINS=http://localhost:5173,http://localhost:3000\n</code></pre>"},{"location":"getting-started/configuration/#configuration-options","title":"Configuration Options","text":""},{"location":"getting-started/configuration/#model-selection","title":"Model Selection","text":"<pre><code>VLLM_MODEL=Qwen/Qwen3-4B\n</code></pre> <p>Options: - <code>Qwen/Qwen3-4B</code> (default) - Balanced performance and quality - <code>meta-llama/Meta-Llama-3.1-8B-Instruct</code> - High quality, requires more resources - <code>gpt2</code> - Fast, for testing only</p>"},{"location":"getting-started/configuration/#generation-parameters","title":"Generation Parameters","text":"<p>Max Tokens <pre><code>VLLM_MAX_TOKENS=512\n</code></pre> Maximum number of tokens to generate (default: 512, range: 1-8192)</p> <p>Temperature <pre><code>VLLM_TEMPERATURE=0.7\n</code></pre> Sampling temperature (default: 0.7, range: 0.0-2.0) - Lower (0.1-0.5): More deterministic, focused responses - Higher (0.8-1.5): More creative, varied responses</p> <p>Top-P (Nucleus Sampling) <pre><code>VLLM_TOP_P=0.95\n</code></pre> Nucleus sampling threshold (default: 0.95, range: 0.0-1.0)</p>"},{"location":"getting-started/configuration/#gpu-configuration","title":"GPU Configuration","text":"<p>Tensor Parallel Size <pre><code>VLLM_TENSOR_PARALLEL_SIZE=1\n</code></pre> Number of GPUs to use for model parallelism (default: 1)</p> <p>Max Model Length <pre><code>VLLM_MAX_MODEL_LEN=4096\n</code></pre> Maximum context length (default: 4096 tokens)</p> <p>Trust Remote Code <pre><code>VLLM_TRUST_REMOTE_CODE=false\n</code></pre> Allow execution of remote code in model (default: false, set to true only for trusted models)</p>"},{"location":"getting-started/configuration/#cors-configuration","title":"CORS Configuration","text":"<p><pre><code>BACKEND_ALLOW_ORIGINS=http://localhost:5173,http://localhost:3000\n</code></pre> Comma-separated list of allowed origins (use <code>*</code> for all origins in development only)</p>"},{"location":"getting-started/configuration/#using-environment-variables","title":"Using Environment Variables","text":""},{"location":"getting-started/configuration/#linuxmacos","title":"Linux/macOS","text":"<pre><code>export VLLM_MODEL=Qwen/Qwen3-4B\nexport VLLM_MAX_TOKENS=512\nuvicorn app.main:app --host 0.0.0.0 --port 8001\n</code></pre>"},{"location":"getting-started/configuration/#windows-powershell","title":"Windows (PowerShell)","text":"<pre><code>$env:VLLM_MODEL=\"Qwen/Qwen3-4B\"\n$env:VLLM_MAX_TOKENS=\"512\"\nuvicorn app.main:app --host 0.0.0.0 --port 8001\n</code></pre>"},{"location":"getting-started/configuration/#using-env-file","title":"Using .env File","text":"<p>Install python-dotenv: <pre><code>pip install python-dotenv\n</code></pre></p> <p>Load in your application: <pre><code>from dotenv import load_dotenv\nload_dotenv()\n</code></pre></p>"},{"location":"getting-started/configuration/#frontend-configuration","title":"Frontend Configuration","text":""},{"location":"getting-started/configuration/#api-configuration","title":"API Configuration","text":"<p>Edit <code>src/frontend/src/config/api.js</code>:</p> <pre><code>export const API_BASE_URL = process.env.VITE_API_URL || 'http://localhost:8001';\nexport const DEFAULT_MAX_TOKENS = 512;\nexport const DEFAULT_TEMPERATURE = 0.7;\nexport const DEFAULT_TOP_P = 0.95;\n</code></pre>"},{"location":"getting-started/configuration/#persona-configuration","title":"Persona Configuration","text":"<p>Edit <code>src/frontend/src/config/personas.js</code> to customize personas:</p> <pre><code>export const PERSONAS = {\n  developer: {\n    key: 'developer',\n    label: 'Developer',\n    description: 'Technical feasibility and implementation',\n    systemPrompt: 'You are a software developer...',\n    color: '#2563eb'\n  },\n  // Add custom personas...\n};\n</code></pre>"},{"location":"getting-started/configuration/#build-configuration","title":"Build Configuration","text":"<p>Edit <code>src/frontend/vite.config.js</code>:</p> <pre><code>export default defineConfig({\n  server: {\n    port: 5173,\n    host: true,\n    proxy: {\n      '/api': 'http://localhost:8001'\n    }\n  }\n});\n</code></pre>"},{"location":"getting-started/configuration/#production-configuration","title":"Production Configuration","text":""},{"location":"getting-started/configuration/#backend-production-settings","title":"Backend Production Settings","text":"<pre><code># Disable reload\nuvicorn app.main:app --host 0.0.0.0 --port 8001 --workers 4\n\n# Use gunicorn for production\ngunicorn app.main:app -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8001\n</code></pre>"},{"location":"getting-started/configuration/#frontend-production-build","title":"Frontend Production Build","text":"<pre><code># Build for production\nnpm run build\n\n# Preview production build\nnpm run preview\n\n# Serve with a static server\nnpx serve -s dist -p 5173\n</code></pre>"},{"location":"getting-started/configuration/#environment-specific-configuration","title":"Environment-Specific Configuration","text":"<p>Create multiple .env files:</p> <ul> <li><code>.env.development</code></li> <li><code>.env.production</code></li> <li><code>.env.test</code></li> </ul> <p>Load based on environment:</p> <pre><code># Development\nNODE_ENV=development npm run dev\n\n# Production\nNODE_ENV=production npm run build\n</code></pre>"},{"location":"getting-started/configuration/#docker-configuration","title":"Docker Configuration","text":""},{"location":"getting-started/configuration/#dockerfile","title":"Dockerfile","text":"<pre><code>FROM python:3.10-slim\n\nWORKDIR /app\n\nCOPY src/backend/requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\n\nCOPY src/backend ./backend\n\nCMD [\"uvicorn\", \"backend.app.main:app\", \"--host\", \"0.0.0.0\", \"--port\", \"8001\"]\n</code></pre>"},{"location":"getting-started/configuration/#docker-composeyml","title":"docker-compose.yml","text":"<pre><code>version: '3.8'\n\nservices:\n  backend:\n    build: .\n    ports:\n      - \"8001:8001\"\n    environment:\n      - VLLM_MODEL=Qwen/Qwen3-4B\n      - VLLM_MAX_TOKENS=512\n    volumes:\n      - ./models:/root/.cache/huggingface\n\n  frontend:\n    image: node:18\n    working_dir: /app\n    volumes:\n      - ./src/frontend:/app\n    ports:\n      - \"5173:5173\"\n    command: npm run dev\n</code></pre>"},{"location":"getting-started/configuration/#performance-tuning","title":"Performance Tuning","text":""},{"location":"getting-started/configuration/#backend-performance","title":"Backend Performance","text":"<p>GPU Memory Optimization <pre><code># Reduce GPU memory usage\nexport GPU_MEMORY_UTILIZATION=0.7\n\n# Use CPU (slower)\nexport CUDA_VISIBLE_DEVICES=\"\"\n</code></pre></p> <p>Connection Pooling Add connection pooling for database connections if using a database.</p> <p>Caching Implement response caching for common queries:</p> <pre><code>from fastapi_cache import FastAPICache\nfrom fastapi_cache.backends.inmemory import InMemoryBackend\n\nFastAPICache.init(InMemoryBackend())\n</code></pre>"},{"location":"getting-started/configuration/#frontend-performance","title":"Frontend Performance","text":"<p>Code Splitting <pre><code>// Use dynamic imports\nconst ChatWindow = lazy(() =&gt; import('./components/ChatWindow'));\n</code></pre></p> <p>Bundle Size Optimization <pre><code># Analyze bundle\nnpm run build -- --analyze\n\n# Use production mode\nNODE_ENV=production npm run build\n</code></pre></p>"},{"location":"getting-started/configuration/#security-configuration","title":"Security Configuration","text":""},{"location":"getting-started/configuration/#api-authentication","title":"API Authentication","text":"<p>Add API key authentication:</p> <pre><code>from fastapi.security import APIKeyHeader\n\napi_key_header = APIKeyHeader(name=\"X-API-Key\")\n\n@app.post(\"/generate\")\nasync def generate(payload: GenerateRequest, api_key: str = Depends(api_key_header)):\n    if api_key != os.getenv(\"API_KEY\"):\n        raise HTTPException(status_code=403, detail=\"Invalid API key\")\n    # ...\n</code></pre>"},{"location":"getting-started/configuration/#rate-limiting","title":"Rate Limiting","text":"<pre><code>pip install slowapi\n</code></pre> <pre><code>from slowapi import Limiter\nfrom slowapi.util import get_remote_address\n\nlimiter = Limiter(key_func=get_remote_address)\n\n@app.post(\"/generate\")\n@limiter.limit(\"10/minute\")\nasync def generate(request: Request, payload: GenerateRequest):\n    # ...\n</code></pre>"},{"location":"getting-started/configuration/#https-configuration","title":"HTTPS Configuration","text":"<pre><code># Generate self-signed certificate for development\nopenssl req -x509 -newkey rsa:4096 -nodes -out cert.pem -keyout key.pem -days 365\n\n# Run with HTTPS\nuvicorn app.main:app --ssl-keyfile=key.pem --ssl-certfile=cert.pem\n</code></pre>"},{"location":"getting-started/configuration/#monitoring-logging","title":"Monitoring &amp; Logging","text":""},{"location":"getting-started/configuration/#backend-logging","title":"Backend Logging","text":"<p>Configure logging in <code>src/backend/app/main.py</code>:</p> <pre><code>import logging\n\nlogging.basicConfig(\n    level=logging.INFO,\n    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',\n    handlers=[\n        logging.FileHandler('marc.log'),\n        logging.StreamHandler()\n    ]\n)\n</code></pre>"},{"location":"getting-started/configuration/#health-checks","title":"Health Checks","text":"<p>The <code>/health</code> endpoint provides system status:</p> <pre><code>curl http://localhost:8001/health\n</code></pre> <p>Response: <pre><code>{\n  \"status\": \"ok\",\n  \"model\": \"Qwen/Qwen3-4B\",\n  \"engine_ready\": true\n}\n</code></pre></p>"},{"location":"getting-started/configuration/#next-steps","title":"Next Steps","text":"<ul> <li>Architecture Overview - Understand the system design</li> <li>API Reference - Explore the complete API</li> <li>Development Guide - Start contributing</li> </ul>"},{"location":"getting-started/installation/","title":"Installation Guide","text":"<p>This guide will help you install and set up MARC on your local machine.</p>"},{"location":"getting-started/installation/#prerequisites","title":"Prerequisites","text":"<p>Before you begin, ensure you have the following installed:</p> <ul> <li>Python 3.10+ (for backend)</li> <li>Node.js 18+ (for frontend)</li> <li>pip (Python package manager)</li> <li>npm (Node.js package manager)</li> <li>Git (version control)</li> </ul>"},{"location":"getting-started/installation/#optional-but-recommended","title":"Optional but Recommended","text":"<ul> <li>CUDA-capable GPU (for faster vLLM inference, CPU is possible but slower)</li> <li>8GB+ RAM (16GB+ recommended for smoother performance)</li> <li>Docker (for containerized deployment)</li> </ul>"},{"location":"getting-started/installation/#installation-steps","title":"Installation Steps","text":""},{"location":"getting-started/installation/#1-clone-the-repository","title":"1. Clone the Repository","text":"<pre><code>git clone https://github.com/yourusername/SEproj1a1.git\ncd SEproj1a1\n</code></pre>"},{"location":"getting-started/installation/#2-backend-setup","title":"2. Backend Setup","text":""},{"location":"getting-started/installation/#create-virtual-environment","title":"Create Virtual Environment","text":"<pre><code>cd src/backend\npython -m venv .venv\n</code></pre>"},{"location":"getting-started/installation/#activate-virtual-environment","title":"Activate Virtual Environment","text":"<p>Linux/macOS: <pre><code>source .venv/bin/activate\n</code></pre></p> <p>Windows: <pre><code>.venv\\Scripts\\activate\n</code></pre></p>"},{"location":"getting-started/installation/#install-dependencies","title":"Install Dependencies","text":"<pre><code>pip install --upgrade pip\npip install -r requirements.txt\n</code></pre>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<pre><code>python -c \"import fastapi; import vllm; print('Backend dependencies installed successfully!')\"\n</code></pre>"},{"location":"getting-started/installation/#3-frontend-setup","title":"3. Frontend Setup","text":"<pre><code>cd ../frontend\nnpm install\n</code></pre>"},{"location":"getting-started/installation/#verify-installation_1","title":"Verify Installation","text":"<pre><code>npm run build\n</code></pre> <p>If the build succeeds, your frontend is set up correctly!</p>"},{"location":"getting-started/installation/#4-configuration","title":"4. Configuration","text":""},{"location":"getting-started/installation/#backend-environment-variables","title":"Backend Environment Variables","text":"<p>Create a <code>.env</code> file in <code>src/backend/</code>:</p> <pre><code># Model configuration\nVLLM_MODEL=Qwen/Qwen3-4B\nVLLM_MAX_TOKENS=512\nVLLM_TEMPERATURE=0.7\nVLLM_TOP_P=0.95\n\n# Server configuration\nBACKEND_ALLOW_ORIGINS=http://localhost:5173,http://localhost:3000\n\n# GPU configuration (optional)\nVLLM_TENSOR_PARALLEL_SIZE=1\nVLLM_TRUST_REMOTE_CODE=false\nVLLM_MAX_MODEL_LEN=4096\n</code></pre>"},{"location":"getting-started/installation/#frontend-configuration","title":"Frontend Configuration","text":"<p>The frontend is pre-configured to connect to <code>http://localhost:8001</code>. To change this, edit <code>src/frontend/src/config/api.js</code>.</p>"},{"location":"getting-started/installation/#verification","title":"Verification","text":""},{"location":"getting-started/installation/#test-backend","title":"Test Backend","text":"<pre><code>cd src/backend\nsource .venv/bin/activate  # Windows: .venv\\Scripts\\activate\nuvicorn app.main:app --host 0.0.0.0 --port 8001 --reload\n</code></pre> <p>Open http://localhost:8001/docs in your browser. You should see the FastAPI Swagger documentation.</p>"},{"location":"getting-started/installation/#test-frontend","title":"Test Frontend","text":"<p>In a new terminal:</p> <pre><code>cd src/frontend\nnpm run dev\n</code></pre> <p>Open http://localhost:5173 in your browser. You should see the MARC login screen.</p>"},{"location":"getting-started/installation/#common-installation-issues","title":"Common Installation Issues","text":""},{"location":"getting-started/installation/#vllm-installation-fails","title":"vLLM Installation Fails","text":"<p>Issue: vLLM requires CUDA toolkit Solution: Install CUDA toolkit or use CPU-only mode: <pre><code>export CUDA_VISIBLE_DEVICES=\"\"\n</code></pre></p>"},{"location":"getting-started/installation/#port-already-in-use","title":"Port Already in Use","text":"<p>Issue: Port 8001 or 5173 is already occupied Solution: Use different ports: <pre><code># Backend\nuvicorn app.main:app --port 8002\n\n# Frontend (edit vite.config.js)\nnpm run dev -- --port 5174\n</code></pre></p>"},{"location":"getting-started/installation/#permission-denied","title":"Permission Denied","text":"<p>Issue: Cannot create virtual environment or install packages Solution: Use user-level installation: <pre><code>pip install --user -r requirements.txt\n</code></pre></p>"},{"location":"getting-started/installation/#model-download-timeout","title":"Model Download Timeout","text":"<p>Issue: Large model download times out Solution: Pre-download the model: <pre><code>python -c \"from transformers import AutoTokenizer; AutoTokenizer.from_pretrained('Qwen/Qwen3-4B')\"\n</code></pre></p>"},{"location":"getting-started/installation/#docker-installation-alternative","title":"Docker Installation (Alternative)","text":"<p>If you prefer Docker:</p> <pre><code># Build image\ndocker build -t marc:latest .\n\n# Run container\ndocker run -p 8001:8001 -p 5173:5173 marc:latest\n\n# Or use Docker Compose\ndocker-compose up --build\n</code></pre>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start Guide - Generate your first requirement</li> <li>Configuration - Customize MARC for your needs</li> <li>Architecture Overview - Understand how MARC works</li> </ul>"},{"location":"getting-started/quickstart/","title":"Quick Start Guide","text":"<p>Get MARC up and running in under 5 minutes and generate your first requirement!</p>"},{"location":"getting-started/quickstart/#prerequisites","title":"Prerequisites","text":"<p>Make sure you've completed the Installation Guide before proceeding.</p>"},{"location":"getting-started/quickstart/#starting-marc","title":"Starting MARC","text":""},{"location":"getting-started/quickstart/#step-1-start-the-backend","title":"Step 1: Start the Backend","text":"<p>Open a terminal and run:</p> <pre><code>cd src/backend\nsource .venv/bin/activate  # Windows: .venv\\Scripts\\activate\nuvicorn app.main:app --host 0.0.0.0 --port 8001 --reload\n</code></pre> <p>You should see output like: <pre><code>INFO:     Started server process [12345]\nINFO:     Waiting for application startup.\nINFO:     Application startup complete.\nINFO:     Uvicorn running on http://0.0.0.0:8001\n</code></pre></p> <p>The backend is now available at <code>http://localhost:8001</code></p>"},{"location":"getting-started/quickstart/#step-2-start-the-frontend","title":"Step 2: Start the Frontend","text":"<p>Open a new terminal and run:</p> <pre><code>cd src/frontend\nnpm run dev\n</code></pre> <p>You should see: <pre><code>  VITE v5.1.0  ready in 423 ms\n\n  \u279c  Local:   http://localhost:5173/\n  \u279c  Network: use --host to expose\n</code></pre></p> <p>The frontend is now available at <code>http://localhost:5173</code></p>"},{"location":"getting-started/quickstart/#generating-your-first-requirement","title":"Generating Your First Requirement","text":""},{"location":"getting-started/quickstart/#step-3-select-a-persona","title":"Step 3: Select a Persona","text":"<ol> <li>Open your browser to <code>http://localhost:5173</code></li> <li>You'll see the MARC login screen with 5 persona options:</li> <li>Developer - Technical perspective</li> <li>Product Manager - Business value perspective</li> <li>Customer - User experience perspective</li> <li>Sales - Value proposition perspective</li> <li> <p>Shareholder - Financial perspective</p> </li> <li> <p>Click on \"Developer\" to start with a technical perspective</p> </li> </ol>"},{"location":"getting-started/quickstart/#step-4-enter-a-requirement-prompt","title":"Step 4: Enter a Requirement Prompt","text":"<p>In the message input box at the bottom, enter a requirement description:</p> <pre><code>I need user authentication with email and password\n</code></pre> <p>Press Enter or click the Generate button.</p>"},{"location":"getting-started/quickstart/#step-5-watch-the-ai-generate-requirements","title":"Step 5: Watch the AI Generate Requirements","text":"<p>You'll see the AI generate a structured requirement in real-time:</p> <pre><code>REQ-DEV-001: User Authentication System\n\nCategory: Security\nPriority: High\n\nDescription:\nImplement secure user authentication using email and password credentials\nwith industry-standard encryption and session management.\n\nRationale:\nUser authentication is fundamental for securing user data and providing\npersonalized experiences. Email/password authentication is widely understood\nand accepted by users.\n\nAcceptance Criteria:\n- Users can register with valid email and strong password\n- Passwords are hashed using bcrypt with minimum 10 rounds\n- Failed login attempts are rate-limited (max 5 per 15 minutes)\n- Session tokens expire after 24 hours of inactivity\n- Password reset functionality via email verification\n\nDependencies:\n- Email service (SMTP or SendGrid)\n- Database with user table\n- JWT token generation library\n\nVerification Method:\n- Unit tests for authentication logic\n- Integration tests for registration/login flows\n- Security audit for password hashing and session management\n- Manual testing of rate limiting\n</code></pre>"},{"location":"getting-started/quickstart/#step-6-try-different-personas","title":"Step 6: Try Different Personas","text":"<p>Click \"Switch Role\" in the top-right corner and try the same prompt with different personas:</p> <p>Product Manager: <pre><code>I need user authentication with email and password\n</code></pre></p> <p>Will generate requirements focused on: - User value and business metrics - Success criteria (e.g., 95% successful login rate) - User stories and acceptance criteria</p> <p>Customer: <pre><code>I need user authentication with email and password\n</code></pre></p> <p>Will generate requirements focused on: - Usability and simplicity - Pain points and user concerns - Minimal friction in the login process</p>"},{"location":"getting-started/quickstart/#example-prompts-to-try","title":"Example Prompts to Try","text":""},{"location":"getting-started/quickstart/#e-commerce-features","title":"E-commerce Features","text":"<pre><code>Build a shopping cart with add to cart and checkout functionality\n</code></pre>"},{"location":"getting-started/quickstart/#healthcare-systems","title":"Healthcare Systems","text":"<pre><code>Create a patient appointment scheduling system\n</code></pre>"},{"location":"getting-started/quickstart/#financial-applications","title":"Financial Applications","text":"<pre><code>Implement real-time stock price monitoring and alerts\n</code></pre>"},{"location":"getting-started/quickstart/#mobile-features","title":"Mobile Features","text":"<pre><code>Add push notifications for order status updates\n</code></pre>"},{"location":"getting-started/quickstart/#understanding-the-output","title":"Understanding the Output","text":"<p>Each generated requirement follows IEEE 29148 standards with these sections:</p> <ul> <li>REQ-ID: Unique identifier (format: REQ-{PERSONA}-{NUMBER})</li> <li>Category: Type of requirement (Functional, Non-functional, Performance, Security)</li> <li>Priority: Importance level (High, Medium, Low)</li> <li>Description: Clear, unambiguous requirement statement</li> <li>Rationale: Why this requirement is needed</li> <li>Acceptance Criteria: Testable conditions for completion</li> <li>Dependencies: Related systems or requirements</li> <li>Verification Method: How to test/verify the requirement</li> </ul>"},{"location":"getting-started/quickstart/#next-steps","title":"Next Steps","text":"<p>Now that you've generated your first requirement, explore:</p> <ul> <li>Using Personas - Learn how to leverage different stakeholder perspectives</li> <li>Generating Requirements - Best practices for prompting</li> <li>API Reference - Integrate MARC into your workflow</li> <li>Architecture - Understand how MARC works under the hood</li> </ul>"},{"location":"getting-started/quickstart/#tips-for-better-requirements","title":"Tips for Better Requirements","text":"<ol> <li>Be Specific: Instead of \"user management\", try \"user registration with email verification\"</li> <li>Add Context: Mention the domain (e-commerce, healthcare, finance)</li> <li>Include Constraints: Specify performance needs, security requirements, or scale</li> <li>Use Multiple Personas: Generate requirements from all 5 perspectives for comprehensive coverage</li> </ol>"},{"location":"getting-started/quickstart/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/quickstart/#backend-not-responding","title":"Backend Not Responding","text":"<pre><code># Check if backend is running\ncurl http://localhost:8001/health\n\n# Expected output:\n{\"status\":\"ok\",\"model\":\"Qwen/Qwen3-4B\",\"engine_ready\":true}\n</code></pre>"},{"location":"getting-started/quickstart/#frontend-cant-connect","title":"Frontend Can't Connect","text":"<p>Check that: 1. Backend is running on port 8001 2. No firewall is blocking connections 3. CORS settings allow localhost:5173</p>"},{"location":"getting-started/quickstart/#generation-takes-too-long","title":"Generation Takes Too Long","text":"<ul> <li>First generation may take 30-60 seconds while the model loads</li> <li>Subsequent generations should be faster (2-5 seconds)</li> <li>Consider using a GPU for faster inference</li> </ul>"},{"location":"getting-started/quickstart/#getting-help","title":"Getting Help","text":"<ul> <li>Check the Testing Guide for debugging</li> <li>Review Configuration for customization options</li> <li>See Common Issues in the installation guide</li> </ul>"},{"location":"guide/personas/","title":"Using Personas","text":"<p>Learn how to effectively use MARC's five stakeholder personas to generate comprehensive requirements.</p>"},{"location":"guide/personas/#overview","title":"Overview","text":"<p>MARC simulates five distinct stakeholder perspectives, each bringing unique concerns and priorities to requirements engineering.</p>"},{"location":"guide/personas/#the-five-personas","title":"The Five Personas","text":""},{"location":"guide/personas/#developer","title":"Developer","text":"<p>Focus: Technical feasibility and implementation</p> <p>Key Concerns: - Implementation complexity - Technical dependencies - Security and performance - Code maintainability - Integration with existing systems</p> <p>Best For: - Technical requirements - Architecture decisions - Security and performance specs - API and interface definitions</p> <p>Example Output: <pre><code>REQ-DEV-001: User Authentication System\n\nCategory: Security\nPriority: High\n\nDescription:\nImplement secure user authentication using email and password with\nbcrypt hashing, JWT tokens, and rate limiting.\n\nRationale:\nSecure authentication is critical for protecting user data and preventing\nunauthorized access. Industry-standard encryption prevents common attacks.\n\nAcceptance Criteria:\n- Password hashing with bcrypt (10+ rounds)\n- JWT tokens with 24-hour expiration\n- Rate limiting: 5 failed attempts per 15 minutes\n- HTTPS-only cookie for token storage\n\nDependencies:\n- bcrypt library\n- JWT library\n- Redis for rate limiting\n\nVerification Method:\n- Unit tests for authentication logic\n- Security audit for password handling\n- Integration tests for login flow\n</code></pre></p>"},{"location":"guide/personas/#product-manager","title":"Product Manager","text":"<p>Focus: User value and business metrics</p> <p>Key Concerns: - User stories and value - Business KPIs - Feature prioritization - Success metrics - Competitive differentiation</p> <p>Best For: - User-centric requirements - Business value definition - Success criteria - Product roadmap alignment</p> <p>Example Output: <pre><code>REQ-PM-001: User Authentication Feature\n\nCategory: Functional\nPriority: High\n\nDescription:\nEnable users to create accounts and securely log in to access personalized\nfeatures and data.\n\nRationale:\nAuthentication is table stakes for modern web applications. Enables\npersonalization, user retention, and data security. Competitive parity.\n\nAcceptance Criteria:\n- Users can register with email in &lt; 1 minute\n- Login success rate &gt; 95%\n- Password reset flow &lt; 3 steps\n- Social login option for convenience\n- WCAG 2.1 AA accessibility compliance\n\nDependencies:\n- Email service integration\n- OAuth providers (Google, GitHub)\n\nVerification Method:\n- User testing with 10+ participants\n- Analytics tracking for signup conversion\n- A/B test social vs email signup\n</code></pre></p>"},{"location":"guide/personas/#customer","title":"Customer","text":"<p>Focus: Usability and user experience</p> <p>Key Concerns: - Ease of use - Minimal friction - Clear error messages - Accessibility - Mobile experience</p> <p>Best For: - UX requirements - Accessibility needs - User pain points - Simplicity constraints</p> <p>Example Output: <pre><code>REQ-CUST-001: Easy Login Experience\n\nCategory: Usability\nPriority: High\n\nDescription:\nProvide a simple, intuitive login process that doesn't frustrate users\nwith complex requirements or confusing flows.\n\nRationale:\nComplex authentication frustrates users and leads to abandonment. Users\nvalue simplicity and speed over strict password policies.\n\nAcceptance Criteria:\n- Login form visible without scrolling\n- Clear error messages (\"Invalid password\" not \"Error 401\")\n- Password visibility toggle\n- \"Remember me\" option\n- Obvious \"Forgot password?\" link\n- No CAPTCHA unless suspicious activity\n\nDependencies:\n- Mobile-responsive design\n- Clear copywriting\n\nVerification Method:\n- User testing sessions\n- Usability heuristic evaluation\n- Task completion time &lt; 30 seconds\n</code></pre></p>"},{"location":"guide/personas/#sales","title":"Sales","text":"<p>Focus: Value proposition and competitive advantage</p> <p>Key Concerns: - Customer acquisition - Selling points - Competitive differentiation - Demos and trials - Customer objections</p> <p>Best For: - Market differentiation - Sales enablement features - Demo capabilities - Customer-facing features</p> <p>Example Output: <pre><code>REQ-SAL-001: Enterprise Authentication Options\n\nCategory: Functional\nPriority: Medium\n\nDescription:\nSupport enterprise SSO (Single Sign-On) via SAML and OAuth to enable\nsales to large organizations requiring centralized authentication.\n\nRationale:\nEnterprise customers demand SSO integration. This is often a deal-breaker\nfor sales to Fortune 500 companies. Competitive advantage over smaller\ncompetitors.\n\nAcceptance Criteria:\n- SAML 2.0 support for enterprise SSO\n- OAuth 2.0 for modern cloud providers\n- Admin dashboard for authentication settings\n- Audit logs for compliance\n- Support for Active Directory integration\n\nDependencies:\n- SAML library\n- Enterprise sales collateral\n- Support team training\n\nVerification Method:\n- Successfully integrate with 3+ enterprise IdPs\n- Sales team demo capability\n- Customer POC success\n</code></pre></p>"},{"location":"guide/personas/#shareholder","title":"Shareholder","text":"<p>Focus: Financial returns and strategic value</p> <p>Key Concerns: - Return on investment - Cost vs benefit - Strategic alignment - Market opportunity - Competitive positioning</p> <p>Best For: - Business case justification - Cost-benefit analysis - Strategic priorities - Investment decisions</p> <p>Example Output: <pre><code>REQ-SH-001: Authentication Infrastructure Investment\n\nCategory: Strategic\nPriority: Medium\n\nDescription:\nInvest in robust, scalable authentication infrastructure that supports\ncurrent and future authentication methods with minimal ongoing costs.\n\nRationale:\nOne-time investment in proper authentication infrastructure prevents\ncostly rework and security breaches. Enables enterprise sales (higher\nLTV customers). Reduces support costs through better UX.\n\nAcceptance Criteria:\n- Development cost &lt; $50K\n- Supports 100K+ concurrent users\n- &lt; 2% authentication-related support tickets\n- Enables enterprise sales (average contract $100K+)\n- Security audit certification\n\nDependencies:\n- Cloud infrastructure budget\n- Security team capacity\n\nVerification Method:\n- Financial analysis showing positive ROI within 12 months\n- Enterprise sales pipeline growth\n- Support ticket volume tracking\n</code></pre></p>"},{"location":"guide/personas/#choosing-the-right-persona","title":"Choosing the Right Persona","text":""},{"location":"guide/personas/#single-persona-selection","title":"Single Persona Selection","text":"<p>Choose based on your primary concern:</p> Concern Persona Example How to build it? Developer \"What tech stack?\" What's the value? Product Manager \"Will users want this?\" Is it easy to use? Customer \"Can my grandma use it?\" Can we sell it? Sales \"What's the pitch?\" Is it worth it? Shareholder \"What's the ROI?\""},{"location":"guide/personas/#multi-persona-strategy","title":"Multi-Persona Strategy","text":"<p>For comprehensive requirements, generate from multiple perspectives:</p> <p>Recommended Order: 1. Product Manager - Define user value and business case 2. Customer - Identify usability requirements 3. Developer - Assess technical feasibility 4. Sales - Add competitive differentiation 5. Shareholder - Validate financial viability</p> <p>Synthesis: Compare outputs and look for: - Conflicts (Developer: \"Takes 6 months\" vs Shareholder: \"Need it in 1 month\") - Overlaps (All agree authentication is High priority) - Gaps (No one mentioned mobile support)</p>"},{"location":"guide/personas/#tips-for-better-results","title":"Tips for Better Results","text":""},{"location":"guide/personas/#be-specific","title":"Be Specific","text":"<p>\u274c Bad: \"I need user management\" \u2705 Good: \"I need user registration with email verification for a healthcare SaaS application\"</p>"},{"location":"guide/personas/#add-context","title":"Add Context","text":"<p>\u274c Bad: \"Build payment processing\" \u2705 Good: \"Build Stripe payment processing for subscription-based SaaS with monthly and annual plans\"</p>"},{"location":"guide/personas/#include-constraints","title":"Include Constraints","text":"<p>\u274c Bad: \"Add search functionality\" \u2705 Good: \"Add search functionality that returns results in &lt; 100ms for datasets up to 1M records\"</p>"},{"location":"guide/personas/#use-domain-language","title":"Use Domain Language","text":"<p>\u274c Bad: \"Track stuff\" \u2705 Good: \"Implement HIPAA-compliant patient record tracking for medical clinics\"</p>"},{"location":"guide/personas/#examples-by-domain","title":"Examples by Domain","text":""},{"location":"guide/personas/#e-commerce","title":"E-commerce","text":"<pre><code>Persona: Product Manager\nPrompt: \"Build a shopping cart with add/remove items, quantity adjustment,\nand persistent cart across sessions for a fashion e-commerce site\"\n</code></pre>"},{"location":"guide/personas/#healthcare","title":"Healthcare","text":"<pre><code>Persona: Developer\nPrompt: \"Create HIPAA-compliant patient appointment scheduling system with\nreal-time availability, automated reminders, and EHR integration\"\n</code></pre>"},{"location":"guide/personas/#finance","title":"Finance","text":"<pre><code>Persona: Shareholder\nPrompt: \"Implement real-time stock portfolio tracking with alerts, risk\nanalysis, and SEC filing integration for retail investors\"\n</code></pre>"},{"location":"guide/personas/#education","title":"Education","text":"<pre><code>Persona: Customer\nPrompt: \"Build online course platform with video lectures, quizzes, progress\ntracking, and certificates for adult learners\"\n</code></pre>"},{"location":"guide/personas/#next-steps","title":"Next Steps","text":"<ul> <li>Generating Requirements - Best practices for prompting</li> <li>Testing Guide - Validate your requirements</li> <li>API Reference - Automate requirement generation</li> </ul>"},{"location":"guide/requirements/","title":"Generating Requirements","text":"<p>Best practices and techniques for generating high-quality requirements with MARC.</p>"},{"location":"guide/requirements/#effective-prompting","title":"Effective Prompting","text":""},{"location":"guide/requirements/#the-spark-framework","title":"The SPARK Framework","text":"<p>Use SPARK to write effective requirement prompts:</p> <ul> <li>Specific: Clear, unambiguous feature description</li> <li>Purpose: Why this is needed</li> <li>Audience: Who will use it</li> <li>Requirements: Any constraints or must-haves</li> <li>Kontext: Domain, scale, environment</li> </ul>"},{"location":"guide/requirements/#examples","title":"Examples","text":"<p>Basic: <pre><code>Build user authentication\n</code></pre></p> <p>Using SPARK: <pre><code>Build email/password authentication for a healthcare SaaS application\nserving 10K+ users. Must be HIPAA-compliant, support 2FA, and integrate\nwith existing MySQL database. Target: hospital administrators and medical staff.\n</code></pre></p>"},{"location":"guide/requirements/#ieee-29148-compliance","title":"IEEE 29148 Compliance","text":"<p>MARC generates requirements following IEEE 29148 standards. Every requirement includes:</p>"},{"location":"guide/requirements/#required-sections","title":"Required Sections","text":"<p>REQ-ID: Unique identifier <pre><code>Format: REQ-{PERSONA}-{NUMBER}\nExample: REQ-DEV-001\n</code></pre></p> <p>Category: Requirement type - Functional - Non-functional - Performance - Security - Usability</p> <p>Priority: Importance level - High: Critical, must-have - Medium: Important, should-have - Low: Nice-to-have</p> <p>Description: Clear statement of what is required</p> <p>Rationale: Why this requirement exists</p> <p>Acceptance Criteria: Testable conditions for completion</p> <p>Dependencies: Related requirements or systems</p> <p>Verification Method: How to test/validate</p>"},{"location":"guide/requirements/#common-patterns","title":"Common Patterns","text":""},{"location":"guide/requirements/#pattern-1-crud-operations","title":"Pattern 1: CRUD Operations","text":"<pre><code>Create a REST API for managing products in an e-commerce system.\nSupport Create, Read, Update, Delete operations with pagination and filtering.\n</code></pre>"},{"location":"guide/requirements/#pattern-2-integration","title":"Pattern 2: Integration","text":"<pre><code>Integrate with Stripe payment API to process credit card transactions\nwith webhook support for asynchronous payment confirmations.\n</code></pre>"},{"location":"guide/requirements/#pattern-3-dashboardreporting","title":"Pattern 3: Dashboard/Reporting","text":"<pre><code>Build analytics dashboard showing user engagement metrics with real-time\nupdates, exportable reports, and role-based access control.\n</code></pre>"},{"location":"guide/requirements/#pattern-4-authenticationauthorization","title":"Pattern 4: Authentication/Authorization","text":"<pre><code>Implement OAuth 2.0 authentication with role-based access control (RBAC)\nsupporting Admin, Editor, and Viewer roles.\n</code></pre>"},{"location":"guide/requirements/#pattern-5-data-processing","title":"Pattern 5: Data Processing","text":"<pre><code>Create background job processor for processing CSV files up to 1GB,\nwith progress tracking, error handling, and email notifications.\n</code></pre>"},{"location":"guide/requirements/#iterative-refinement","title":"Iterative Refinement","text":""},{"location":"guide/requirements/#step-1-initial-generation","title":"Step 1: Initial Generation","text":"<p>Start broad: <pre><code>Build a blog system\n</code></pre></p>"},{"location":"guide/requirements/#step-2-review-output","title":"Step 2: Review Output","text":"<p>Look for gaps in the generated requirement.</p>"},{"location":"guide/requirements/#step-3-add-details","title":"Step 3: Add Details","text":"<p>Refine your prompt: <pre><code>Build a blog system with markdown support, image uploads, comments,\ntags, and RSS feed generation for a technical documentation site.\n</code></pre></p>"},{"location":"guide/requirements/#step-4-persona-switching","title":"Step 4: Persona Switching","text":"<p>Try different personas for different aspects: - Developer: Technical implementation - Customer: User experience - Product Manager: Business value</p>"},{"location":"guide/requirements/#quality-checklist","title":"Quality Checklist","text":""},{"location":"guide/requirements/#good-requirements-are","title":"Good Requirements Are:","text":"<p>\u2705 Unambiguous: One clear interpretation \u274c Bad: \"The system should be fast\" \u2705 Good: \"API responses should complete within 200ms for 95% of requests\"</p> <p>\u2705 Testable: Can verify completion \u274c Bad: \"Users should find it easy to use\" \u2705 Good: \"90% of users complete signup within 2 minutes without assistance\"</p> <p>\u2705 Necessary: Actually needed \u274c Bad: \"Support 1 billion concurrent users\" (for a startup MVP) \u2705 Good: \"Support 10K concurrent users with horizontal scaling capability\"</p> <p>\u2705 Feasible: Technically possible \u274c Bad: \"AI that reads user's mind\" \u2705 Good: \"AI that suggests features based on usage patterns\"</p> <p>\u2705 Traceable: Linked to business need \u274c Bad: \"Use microservices because it's trendy\" \u2705 Good: \"Use microservices to enable independent team scaling\"</p>"},{"location":"guide/requirements/#domain-specific-tips","title":"Domain-Specific Tips","text":""},{"location":"guide/requirements/#healthcarehipaa","title":"Healthcare/HIPAA","text":"<p>Always mention: - Compliance requirements (HIPAA, GDPR) - Data sensitivity - Audit trail needs - Access control</p> <pre><code>Build patient record system with HIPAA-compliant encryption, audit logging,\nrole-based access, and automatic session timeout.\n</code></pre>"},{"location":"guide/requirements/#financepci-dss","title":"Finance/PCI-DSS","text":"<p>Always mention: - Security standards (PCI-DSS) - Transaction handling - Fraud prevention - Regulatory reporting</p> <pre><code>Implement payment processing system compliant with PCI-DSS, supporting\nfraud detection, chargeback handling, and regulatory reporting.\n</code></pre>"},{"location":"guide/requirements/#e-commerce","title":"E-commerce","text":"<p>Always mention: - Scale (users, products, transactions) - Payment methods - Inventory management - Order fulfillment</p> <pre><code>Build shopping cart for 100K+ products, supporting multiple payment methods,\nreal-time inventory, and integration with ShipStation for fulfillment.\n</code></pre>"},{"location":"guide/requirements/#saasmulti-tenant","title":"SaaS/Multi-tenant","text":"<p>Always mention: - Tenancy model - Data isolation - Per-tenant customization - Billing/metering</p> <pre><code>Create multi-tenant SaaS platform with tenant data isolation, customizable\nbranding, usage-based billing, and admin dashboard per tenant.\n</code></pre>"},{"location":"guide/requirements/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"guide/requirements/#technique-1-negative-requirements","title":"Technique 1: Negative Requirements","text":"<p>Specify what should NOT happen:</p> <pre><code>Build file upload system that accepts images up to 10MB. Do NOT allow\nexecutable files, scripts, or files with double extensions.\n</code></pre>"},{"location":"guide/requirements/#technique-2-performance-targets","title":"Technique 2: Performance Targets","text":"<p>Include specific metrics:</p> <pre><code>Implement search functionality returning results within 100ms for\ndatasets up to 1M records, supporting fuzzy matching and filters.\n</code></pre>"},{"location":"guide/requirements/#technique-3-edge-cases","title":"Technique 3: Edge Cases","text":"<p>Mention unusual scenarios:</p> <pre><code>Build checkout system handling partial payment failures, inventory\ndepletion during checkout, and concurrent purchase attempts.\n</code></pre>"},{"location":"guide/requirements/#technique-4-evolution-path","title":"Technique 4: Evolution Path","text":"<p>Indicate future scalability:</p> <pre><code>Build authentication system starting with email/password, but\narchitected to easily add social login, SSO, and biometric auth later.\n</code></pre>"},{"location":"guide/requirements/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guide/requirements/#issue-vague-requirements","title":"Issue: Vague Requirements","text":"<p>Problem: Generated requirements lack detail</p> <p>Solution: Add more context to your prompt <pre><code>Before: \"Add search\"\nAfter: \"Add full-text search across products, categories, and brands with\nautocomplete, filters, and sorting options\"\n</code></pre></p>"},{"location":"guide/requirements/#issue-wrong-persona-focus","title":"Issue: Wrong Persona Focus","text":"<p>Problem: Technical requirements from Customer persona</p> <p>Solution: Use Developer persona for technical specs</p>"},{"location":"guide/requirements/#issue-missing-sections","title":"Issue: Missing Sections","text":"<p>Problem: No acceptance criteria generated</p> <p>Solution: Explicitly request: \"Include specific, testable acceptance criteria\"</p>"},{"location":"guide/requirements/#issue-unrealistic-requirements","title":"Issue: Unrealistic Requirements","text":"<p>Problem: Requirements that can't be built</p> <p>Solution: Add constraints: \"Build MVP version for 1K users in 2-month timeline\"</p>"},{"location":"guide/requirements/#next-steps","title":"Next Steps","text":"<ul> <li>Using Personas - Choose the right perspective</li> <li>Testing Guide - Validate your requirements</li> <li>API Reference - Automate the workflow</li> </ul>"},{"location":"guide/testing/","title":"Testing Guide","text":"<p>Comprehensive guide to testing MARC and validating generated requirements.</p>"},{"location":"guide/testing/#running-tests","title":"Running Tests","text":""},{"location":"guide/testing/#quick-start","title":"Quick Start","text":"<pre><code># Navigate to project root\ncd /path/to/SEproj1a1\n\n# Install test dependencies (if not already installed)\npip install -r tests/requirements.txt\n\n# Run all tests\npytest\n\n# Run with verbose output\npytest -v\n\n# Run with coverage report\npytest --cov=src --cov-report=html --cov-report=term\n</code></pre>"},{"location":"guide/testing/#using-the-test-script","title":"Using the Test Script","text":"<pre><code># Make executable\nchmod +x run_tests.sh\n\n# Run all tests\n./run_tests.sh\n\n# Run specific categories\n./run_tests.sh unit\n./run_tests.sh integration\n./run_tests.sh backend\n./run_tests.sh personas\n\n# Generate coverage report\n./run_tests.sh coverage\n\n# Quick tests only\n./run_tests.sh quick\n</code></pre>"},{"location":"guide/testing/#test-categories","title":"Test Categories","text":""},{"location":"guide/testing/#unit-tests","title":"Unit Tests","text":"<p>Purpose: Test individual functions and classes in isolation</p> <p>Run: <code>pytest -m unit</code></p> <p>Coverage: - Data model validation - Prompt formatting - Helper functions - Configuration loading</p> <p>Example: <pre><code>def test_chat_message_validation():\n    # Valid message\n    msg = ChatMessage(role=\"user\", content=\"Test\")\n    assert msg.role == \"user\"\n\n    # Invalid role\n    with pytest.raises(ValueError):\n        ChatMessage(role=\"invalid\", content=\"Test\")\n</code></pre></p>"},{"location":"guide/testing/#integration-tests","title":"Integration Tests","text":"<p>Purpose: Test component interactions</p> <p>Run: <code>pytest -m integration</code></p> <p>Coverage: - API endpoint flows - Frontend-backend integration - Streaming protocol - Error handling</p> <p>Example: <pre><code>@pytest.mark.asyncio\nasync def test_generate_endpoint(client):\n    response = await client.post(\"/generate\", json={\n        \"messages\": [{\"role\": \"user\", \"content\": \"Test\"}],\n        \"stream\": False\n    })\n\n    assert response.status_code == 200\n    data = response.json()\n    assert \"output\" in data\n</code></pre></p>"},{"location":"guide/testing/#persona-tests","title":"Persona Tests","text":"<p>Purpose: Validate persona-specific requirement generation</p> <p>Run: <code>pytest tests/integration/test_personas.py</code></p> <p>Coverage: - Each persona generates appropriate requirements - Persona-specific focus areas - Consistent output format</p>"},{"location":"guide/testing/#requirements-tests","title":"Requirements Tests","text":"<p>Purpose: Verify requirement structure and IEEE compliance</p> <p>Run: <code>pytest tests/requirements/</code></p> <p>Coverage: - Requirement ID format - Required sections present - Acceptance criteria testability - IEEE 29148 compliance</p>"},{"location":"guide/testing/#test-structure","title":"Test Structure","text":"<pre><code>tests/\n\u251c\u2500\u2500 backend/              # Backend API tests\n\u2502   \u251c\u2500\u2500 test_api.py      # Endpoint tests\n\u2502   \u2514\u2500\u2500 test_models.py   # Pydantic model tests\n\u251c\u2500\u2500 integration/          # Integration tests\n\u2502   \u251c\u2500\u2500 test_personas.py # Persona-specific tests\n\u2502   \u2514\u2500\u2500 test_multi_agent.py  # Multi-agent tests (planned)\n\u251c\u2500\u2500 requirements/         # Requirement validation tests\n\u2502   \u251c\u2500\u2500 test_extraction.py   # Parse requirements\n\u2502   \u2514\u2500\u2500 test_ieee_compliance.py  # IEEE 29148 checks\n\u251c\u2500\u2500 fixtures/             # Test data and mocks\n\u2502   \u2514\u2500\u2500 sample_requirements.py\n\u251c\u2500\u2500 conftest.py           # Pytest configuration\n\u2514\u2500\u2500 requirements.txt      # Test dependencies\n</code></pre>"},{"location":"guide/testing/#writing-tests","title":"Writing Tests","text":""},{"location":"guide/testing/#backend-api-test","title":"Backend API Test","text":"<pre><code>import pytest\nfrom fastapi.testclient import TestClient\nfrom app.main import app\n\nclient = TestClient(app)\n\ndef test_health_endpoint():\n    response = client.get(\"/health\")\n    assert response.status_code == 200\n\n    data = response.json()\n    assert data[\"status\"] == \"ok\"\n</code></pre>"},{"location":"guide/testing/#async-test","title":"Async Test","text":"<pre><code>import pytest\n\n@pytest.mark.asyncio\nasync def test_generate_streaming(client):\n    async with client.stream(\n        \"POST\",\n        \"/generate\",\n        json={\"messages\": [{\"role\": \"user\", \"content\": \"Test\"}], \"stream\": True}\n    ) as response:\n        chunks = []\n        async for line in response.aiter_lines():\n            if line:\n                chunks.append(json.loads(line))\n\n        assert len(chunks) &gt; 0\n        assert chunks[-1][\"type\"] == \"done\"\n</code></pre>"},{"location":"guide/testing/#persona-test","title":"Persona Test","text":"<pre><code>@pytest.mark.requires_llm\ndef test_developer_persona_generates_technical_requirements():\n    persona = \"developer\"\n    prompt = \"Build user authentication\"\n\n    response = generate_requirement(persona, prompt)\n    requirement = parse_requirement(response)\n\n    # Developer should focus on technical aspects\n    assert \"security\" in requirement.description.lower() or \\\n           \"encryption\" in requirement.description.lower()\n    assert requirement.category in [\"Security\", \"Functional\"]\n</code></pre>"},{"location":"guide/testing/#requirement-validation-test","title":"Requirement Validation Test","text":"<pre><code>def test_requirement_has_all_ieee_sections():\n    requirement_text = \"\"\"\n    REQ-DEV-001: User Authentication\n\n    Category: Security\n    Priority: High\n\n    Description: ...\n    Rationale: ...\n    Acceptance Criteria: ...\n    Dependencies: ...\n    Verification Method: ...\n    \"\"\"\n\n    sections = parse_requirement_sections(requirement_text)\n\n    required_sections = [\n        \"Description\",\n        \"Rationale\",\n        \"Acceptance Criteria\",\n        \"Dependencies\",\n        \"Verification Method\"\n    ]\n\n    for section in required_sections:\n        assert section in sections\n        assert len(sections[section].strip()) &gt; 0\n</code></pre>"},{"location":"guide/testing/#test-fixtures","title":"Test Fixtures","text":""},{"location":"guide/testing/#mock-llm-response","title":"Mock LLM Response","text":"<pre><code>@pytest.fixture\ndef mock_llm_response():\n    return \"\"\"\n    REQ-DEV-001: Test Requirement\n\n    Category: Functional\n    Priority: High\n\n    Description: Test description\n    Rationale: Test rationale\n    Acceptance Criteria:\n    - Criterion 1\n    - Criterion 2\n    Dependencies: None\n    Verification Method: Unit tests\n    \"\"\"\n</code></pre>"},{"location":"guide/testing/#test-client","title":"Test Client","text":"<pre><code>@pytest.fixture\ndef test_client():\n    from app.main import app\n    from fastapi.testclient import TestClient\n    return TestClient(app)\n</code></pre>"},{"location":"guide/testing/#coverage-goals","title":"Coverage Goals","text":"<p>Target: 80%+ code coverage</p> <pre><code># Generate coverage report\npytest --cov=src --cov-report=html\n\n# View report\nopen htmlcov/index.html  # macOS\nxdg-open htmlcov/index.html  # Linux\nstart htmlcov/index.html  # Windows\n</code></pre>"},{"location":"guide/testing/#current-coverage-example","title":"Current Coverage (Example)","text":"<pre><code>Name                          Stmts   Miss  Cover\n-------------------------------------------------\nsrc/backend/app/main.py         156     12    92%\nsrc/backend/app/__init__.py       2      0   100%\n-------------------------------------------------\nTOTAL                           158     12    92%\n</code></pre>"},{"location":"guide/testing/#continuous-integration","title":"Continuous Integration","text":"<p>Tests run automatically on: - Push to any branch - Pull requests - Merges to main</p>"},{"location":"guide/testing/#github-actions-example","title":"GitHub Actions (Example)","text":"<pre><code>name: Tests\n\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    steps:\n    - uses: actions/checkout@v2\n\n    - name: Set up Python\n      uses: actions/setup-python@v2\n      with:\n        python-version: '3.10'\n\n    - name: Install dependencies\n      run: |\n        pip install -r src/backend/requirements.txt\n        pip install -r tests/requirements.txt\n\n    - name: Run tests\n      run: pytest --cov=src --cov-report=term\n\n    - name: Upload coverage\n      uses: codecov/codecov-action@v2\n</code></pre>"},{"location":"guide/testing/#validating-generated-requirements","title":"Validating Generated Requirements","text":""},{"location":"guide/testing/#manual-validation-checklist","title":"Manual Validation Checklist","text":"<p>After generating requirements, verify:</p> <ul> <li>[ ] ID Format: REQ-{PERSONA}-{NUMBER}</li> <li>[ ] Category: Valid category (Functional, Security, etc.)</li> <li>[ ] Priority: High, Medium, or Low</li> <li>[ ] Description: Clear, unambiguous statement</li> <li>[ ] Rationale: Explains why it's needed</li> <li>[ ] Acceptance Criteria: At least 2-3 testable criteria</li> <li>[ ] Dependencies: Lists any dependencies (or \"None\")</li> <li>[ ] Verification Method: Describes how to test</li> </ul>"},{"location":"guide/testing/#automated-validation","title":"Automated Validation","text":"<pre><code>from requirements_validator import validate_requirement\n\nrequirement_text = \"\"\"...\"\"\"\n\nresult = validate_requirement(requirement_text)\n\nif result.is_valid:\n    print(\"\u2713 Requirement is valid\")\nelse:\n    print(\"\u2717 Issues found:\")\n    for issue in result.issues:\n        print(f\"  - {issue}\")\n</code></pre>"},{"location":"guide/testing/#performance-testing","title":"Performance Testing","text":""},{"location":"guide/testing/#load-testing","title":"Load Testing","text":"<p>Test API under load:</p> <pre><code># Install locust\npip install locust\n\n# Create locustfile.py\n# Run load test\nlocust -f locustfile.py --host=http://localhost:8001\n</code></pre>"},{"location":"guide/testing/#response-time-testing","title":"Response Time Testing","text":"<pre><code>import time\n\ndef test_generate_response_time():\n    start = time.time()\n\n    response = client.post(\"/generate\", json={\n        \"messages\": [{\"role\": \"user\", \"content\": \"Test\"}],\n        \"stream\": False\n    })\n\n    elapsed = time.time() - start\n\n    assert response.status_code == 200\n    assert elapsed &lt; 5.0  # Should respond within 5 seconds\n</code></pre>"},{"location":"guide/testing/#debugging-tests","title":"Debugging Tests","text":""},{"location":"guide/testing/#run-single-test","title":"Run Single Test","text":"<pre><code>pytest tests/backend/test_api.py::test_health_endpoint -v\n</code></pre>"},{"location":"guide/testing/#show-print-statements","title":"Show Print Statements","text":"<pre><code>pytest -s  # Don't capture stdout\n</code></pre>"},{"location":"guide/testing/#debug-with-pdb","title":"Debug with pdb","text":"<pre><code>def test_something():\n    import pdb; pdb.set_trace()\n    # Test code...\n</code></pre>"},{"location":"guide/testing/#verbose-logging","title":"Verbose Logging","text":"<pre><code>pytest --log-cli-level=DEBUG\n</code></pre>"},{"location":"guide/testing/#next-steps","title":"Next Steps","text":"<ul> <li>Contributing Guide - Write tests for new features</li> <li>Code Standards - Testing conventions</li> <li>API Reference - Understand what to test</li> </ul>"}]}